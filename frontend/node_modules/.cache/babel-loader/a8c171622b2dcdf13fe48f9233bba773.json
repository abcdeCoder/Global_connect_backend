{"ast":null,"code":"import _slicedToArray from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import{SOCKET_ENDPOINT}from'../../utils/constants';import{io}from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatListItem=function ChatListItem(_ref){var _id=_ref._id,users=_ref.users,latestMessage=_ref.latestMessage;var dispatch=useDispatch();var params=useParams();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),friend=_useState2[0],setFriend=_useState2[1];var socket=useRef(null);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOnline=_useState4[0],setIsOnline=_useState4[1];var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;useEffect(function(){var friendDetails=users.find(function(u){return u._id!==user._id;});setFriend(friendDetails);},[users]);useEffect(function(){socket.current=io(SOCKET_ENDPOINT);},[]);useEffect(function(){socket.current.on(\"getUsers\",function(users){// console.log(users);\nsetIsOnline(users.some(function(u){return u.userId===friend._id;}));});},[friend._id]);return/*#__PURE__*/_jsxs(Link,{to:\"/direct/t/\".concat(_id,\"/\").concat(friend._id),className:\"\".concat(params.chatId===_id&&'bg-gray-100',\" flex gap-3 items-center py-2 px-4 cursor-pointer hover:bg-gray-100\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-14 h-14 relative\",children:[/*#__PURE__*/_jsx(\"img\",{draggable:\"false\",className:\"w-full h-full rounded-full object-cover\",src:friend.avatar,alt:\"avatar\"}),isOnline&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 bottom-0.5 h-3 w-3 bg-green-500 rounded-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:friend.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm truncate w-36 text-gray-400\",children:latestMessage===null||latestMessage===void 0?void 0:latestMessage.content})]})]});};export default ChatListItem;","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/backend/frontend/src/components/Chats/ChatListItem.jsx"],"names":["useEffect","useRef","useState","useDispatch","useSelector","Link","useParams","SOCKET_ENDPOINT","io","ChatListItem","_id","users","latestMessage","dispatch","params","friend","setFriend","socket","isOnline","setIsOnline","state","user","friendDetails","find","u","current","on","some","userId","chatId","avatar","name","content"],"mappings":"4IAAA,OAASA,SAAT,CAAoBC,MAApB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,kBAAhC,CACA,OAASC,eAAT,KAAgC,uBAAhC,CACA,OAASC,EAAT,KAAmB,kBAAnB,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAmC,IAAhCC,CAAAA,GAAgC,MAAhCA,GAAgC,CAA3BC,KAA2B,MAA3BA,KAA2B,CAApBC,aAAoB,MAApBA,aAAoB,CAEpD,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,MAAM,CAAGR,SAAS,EAAxB,CACA,cAA4BJ,QAAQ,CAAC,EAAD,CAApC,wCAAOa,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,MAAM,CAAGhB,MAAM,CAAC,IAAD,CAArB,CACA,eAAgCC,QAAQ,CAAC,KAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,iBAAiBf,WAAW,CAAC,SAACgB,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAA5B,CAAQA,IAAR,cAAQA,IAAR,CAEArB,SAAS,CAAC,UAAM,CACZ,GAAMsB,CAAAA,aAAa,CAAGX,KAAK,CAACY,IAAN,CAAW,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACd,GAAF,GAAUW,IAAI,CAACX,GAAtB,EAAX,CAAtB,CACAM,SAAS,CAACM,aAAD,CAAT,CACH,CAHQ,CAGN,CAACX,KAAD,CAHM,CAAT,CAKAX,SAAS,CAAC,UAAM,CACZiB,MAAM,CAACQ,OAAP,CAAiBjB,EAAE,CAACD,eAAD,CAAnB,CACH,CAFQ,CAEN,EAFM,CAAT,CAIAP,SAAS,CAAC,UAAM,CACZiB,MAAM,CAACQ,OAAP,CAAeC,EAAf,CAAkB,UAAlB,CAA8B,SAAAf,KAAK,CAAI,CACnC;AACAQ,WAAW,CAACR,KAAK,CAACgB,IAAN,CAAW,SAACH,CAAD,QAAOA,CAAAA,CAAC,CAACI,MAAF,GAAab,MAAM,CAACL,GAA3B,EAAX,CAAD,CAAX,CACH,CAHD,EAIH,CALQ,CAKN,CAACK,MAAM,CAACL,GAAR,CALM,CAAT,CAOA,mBACI,MAAC,IAAD,EAAM,EAAE,qBAAeA,GAAf,aAAsBK,MAAM,CAACL,GAA7B,CAAR,CAA4C,SAAS,WAAKI,MAAM,CAACe,MAAP,GAAkBnB,GAAlB,EAAyB,aAA9B,uEAArD,wBACI,aAAK,SAAS,CAAC,oBAAf,wBACI,YAAK,SAAS,CAAC,OAAf,CAAuB,SAAS,CAAC,yCAAjC,CAA2E,GAAG,CAAEK,MAAM,CAACe,MAAvF,CAA+F,GAAG,CAAC,QAAnG,EADJ,CAEKZ,QAAQ,eAAI,YAAK,SAAS,CAAC,+DAAf,EAFjB,GADJ,cAKI,aAAK,SAAS,CAAC,2BAAf,wBACI,aAAM,SAAS,CAAC,SAAhB,UAA2BH,MAAM,CAACgB,IAAlC,EADJ,cAEI,aAAM,SAAS,CAAC,qCAAhB,UAAuDnB,aAAvD,SAAuDA,aAAvD,iBAAuDA,aAAa,CAAEoB,OAAtE,EAFJ,GALJ,GADJ,CAYH,CAvCD,CAyCA,cAAevB,CAAAA,YAAf","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom'\nimport { SOCKET_ENDPOINT } from '../../utils/constants';\nimport { io } from 'socket.io-client';\n\nconst ChatListItem = ({ _id, users, latestMessage }) => {\n\n    const dispatch = useDispatch();\n    const params = useParams();\n    const [friend, setFriend] = useState({});\n\n    const socket = useRef(null);\n    const [isOnline, setIsOnline] = useState(false);\n\n    const { user } = useSelector((state) => state.user);\n\n    useEffect(() => {\n        const friendDetails = users.find((u) => u._id !== user._id);\n        setFriend(friendDetails)\n    }, [users]);\n\n    useEffect(() => {\n        socket.current = io(SOCKET_ENDPOINT);\n    }, []);\n\n    useEffect(() => {\n        socket.current.on(\"getUsers\", users => {\n            // console.log(users);\n            setIsOnline(users.some((u) => u.userId === friend._id));\n        })\n    }, [friend._id])\n\n    return (\n        <Link to={`/direct/t/${_id}/${friend._id}`} className={`${params.chatId === _id && 'bg-gray-100'} flex gap-3 items-center py-2 px-4 cursor-pointer hover:bg-gray-100`}>\n            <div className=\"w-14 h-14 relative\">\n                <img draggable=\"false\" className=\"w-full h-full rounded-full object-cover\" src={friend.avatar} alt=\"avatar\" />\n                {isOnline && <div className=\"absolute right-0 bottom-0.5 h-3 w-3 bg-green-500 rounded-full\"></div>}\n            </div>\n            <div className=\"flex flex-col items-start\">\n                <span className=\"text-sm\">{friend.name}</span>\n                <span className=\"text-sm truncate w-36 text-gray-400\">{latestMessage?.content}</span>\n            </div>\n        </Link>\n    )\n}\n\nexport default ChatListItem"]},"metadata":{},"sourceType":"module"}