{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder (4)\\\\instagram-mern-main\\\\frontend\\\\src\\\\components\\\\User\\\\Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport PostContainer from './Posts/PostContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { clearErrors, followUser, getUserDetails } from '../../actions/userAction';\nimport { clearErrors as clearChatErrors, addNewChat } from '../../actions/chatAction';\nimport { toast } from 'react-toastify';\nimport BackdropLoader from '../Layouts/BackdropLoader';\nimport { metaballsMenu, postsIconFill, postsIconOutline, reelsIcon, savedIconFill, savedIconOutline, settingsIcon, taggedIcon } from './SvgIcons';\nimport { FOLLOW_USER_RESET, USER_DETAILS_RESET } from '../../constants/userConstants';\nimport UsersDialog from '../Layouts/UsersDialog';\nimport { NEW_CHAT_RESET } from '../../constants/chatConstants';\nimport MetaData from '../Layouts/MetaData';\nimport NotFound from '../Errors/NotFound';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  var _user$posts, _user$followers2, _user$following, _user$posts2;\n\n  const dispatch = useDispatch();\n  const params = useParams();\n  const navigate = useNavigate();\n  const [follow, setFollow] = useState(false);\n  const [viewModal, setViewModal] = useState(false);\n  const [followersModal, setFollowersModal] = useState(false);\n  const [usersArr, setUsersArr] = useState([]);\n  const [savedTab, setSavedTab] = useState(false);\n  const {\n    user,\n    error,\n    loading\n  } = useSelector(state => state.userDetails);\n  const {\n    user: loggedInUser\n  } = useSelector(state => state.user);\n  const {\n    error: followError,\n    success,\n    message\n  } = useSelector(state => state.followUser);\n  const {\n    error: chatError,\n    chat\n  } = useSelector(state => state.newChat);\n\n  const handleFollow = () => {\n    // setFollow(!follow); \n    dispatch(followUser(user._id));\n  };\n\n  const handleFollowersModal = () => {\n    setFollowersModal(true);\n    setViewModal(true);\n    setUsersArr(user === null || user === void 0 ? void 0 : user.followers);\n  };\n\n  const handleFollowingModal = () => {\n    setViewModal(true);\n    setFollowersModal(false);\n    setUsersArr(user === null || user === void 0 ? void 0 : user.following);\n  };\n\n  const closeModal = () => {\n    setViewModal(false);\n  };\n\n  useEffect(() => {\n    if (error) {\n      toast.error(error);\n      dispatch(clearErrors());\n    }\n\n    dispatch(getUserDetails(params.username));\n\n    if (followError) {\n      toast.error(followError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      toast.success(message);\n      dispatch({\n        type: FOLLOW_USER_RESET\n      });\n    } // return () => {\n    //     dispatch({ type: USER_DETAILS_RESET })\n    // }\n\n  }, [dispatch, error, params.username, followError, success, message]);\n  useEffect(() => {\n    var _user$followers;\n\n    // console.log(user?.followers?.some((id) => id === loggedInUser._id))\n    setFollow(user === null || user === void 0 ? void 0 : (_user$followers = user.followers) === null || _user$followers === void 0 ? void 0 : _user$followers.some(u => u._id === loggedInUser._id));\n  }, [user]);\n\n  const addToChat = () => {\n    dispatch(addNewChat(user._id));\n  };\n\n  useEffect(() => {\n    if (chatError) {\n      toast.error(chatError);\n      dispatch(clearChatErrors());\n    }\n\n    if (chat) {\n      var _chat$users;\n\n      const friendId = (_chat$users = chat.users) === null || _chat$users === void 0 ? void 0 : _chat$users.find(id => id !== loggedInUser._id);\n      navigate(`/direct/t/${chat._id}/${friendId}`);\n      dispatch({\n        type: NEW_CHAT_RESET\n      });\n    }\n  }, [dispatch, chatError, chat, navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: `${user === null || user === void 0 ? void 0 : user.name} (@${user === null || user === void 0 ? void 0 : user.username}) • Instagram photos and videos`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(BackdropLoader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }, this), user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-16 xl:w-2/3 mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sm:flex w-full sm:py-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sm:w-1/3 flex justify-center mx-auto sm:mx-0\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            draggable: \"false\",\n            className: \"w-40 h-40 rounded-full object-cover\",\n            src: user.avatar,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-6 p-4 sm:w-2/3 sm:p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-8 sm:justify-start justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl sm:text-3xl font-thin\",\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 33\n            }, this), loggedInUser.username === user.username ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/accounts/edit\",\n                className: \"border font-medium hover:bg-gray-50 text-sm rounded px-2 py-1\",\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/accounts/edit\",\n                children: settingsIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3 items-center\",\n              children: [follow ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addToChat,\n                  className: \"border rounded px-2.5 py-[0.3rem] text-sm font-medium hover:bg-gray-100\",\n                  children: \"Message\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleFollow,\n                  className: \"font-medium text-sm bg-red-50 rounded py-1.5 px-3 text-red-600 hover:bg-red-100 hover:text-red-700\",\n                  children: \"Unfollow\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleFollow,\n                className: \"font-medium bg-primary-blue text-sm text-white hover:shadow rounded px-6 py-1.5\",\n                children: \"Follow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sm:block hidden\",\n                children: metaballsMenu\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center max-w-[21.5rem]\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: (_user$posts = user.posts) === null || _user$posts === void 0 ? void 0 : _user$posts.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 65\n              }, this), \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: handleFollowersModal,\n              className: \"cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: (_user$followers2 = user.followers) === null || _user$followers2 === void 0 ? void 0 : _user$followers2.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 96\n              }, this), \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: handleFollowingModal,\n              className: \"cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: (_user$following = user.following) === null || _user$following === void 0 ? void 0 : _user$following.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 96\n              }, this), \" following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium\",\n              children: user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"whitespace-pre-line\",\n              children: user.bio\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 33\n            }, this), (user === null || user === void 0 ? void 0 : user.website) && /*#__PURE__*/_jsxDEV(\"a\", {\n              href: user.website,\n              target: \"_blank\",\n              className: \"text-blue-900 font-medium\",\n              children: new URL(user.website).hostname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), followersModal ? /*#__PURE__*/_jsxDEV(UsersDialog, {\n        title: \"Followers\",\n        open: viewModal,\n        onClose: closeModal,\n        usersList: user === null || user === void 0 ? void 0 : user.followers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(UsersDialog, {\n        title: \"Following\",\n        open: viewModal,\n        onClose: closeModal,\n        usersList: user === null || user === void 0 ? void 0 : user.following\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t sm:ml-8 sm:mr-14\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-12 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setSavedTab(false),\n            className: `${savedTab ? 'text-gray-400' : 'border-t border-black'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`,\n            children: [savedTab ? postsIconOutline : postsIconFill, \" posts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 29\n          }, this), user._id === loggedInUser._id && /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setSavedTab(true),\n            className: `${savedTab ? 'border-t border-black' : 'text-gray-400'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`,\n            children: [savedTab ? savedIconFill : savedIconOutline, \" saved\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"py-3 flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\",\n            children: [reelsIcon, \" reels\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"py-3 hidden sm:flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\",\n            children: [taggedIcon, \" tagged\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }, this), savedTab ? /*#__PURE__*/_jsxDEV(PostContainer, {\n          posts: user === null || user === void 0 ? void 0 : user.saved,\n          id: \"saved\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 29\n        }, this) : (user === null || user === void 0 ? void 0 : (_user$posts2 = user.posts) === null || _user$posts2 === void 0 ? void 0 : _user$posts2.length) > 0 ? /*#__PURE__*/_jsxDEV(PostContainer, {\n          posts: user === null || user === void 0 ? void 0 : user.posts,\n          id: \"posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white mt-2 mb-10 drop-shadow-sm rounded flex sm:flex-row flex-col sm:gap-0 gap-5 sm:p-0 p-4 items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            draggable: \"false\",\n            className: \"w-2/5 rounded-l\",\n            src: \"https://www.instagram.com/static/images/mediaUpsell.jpg/6efc710a1d5a.jpg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto flex flex-col items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-lg sm:text-xl\",\n              children: \"Start capturing and sharing your moments.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Get the app to share your first photo or video.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"SzHFtP9FES3/YEmOOf3dIiR5ufs=\", false, function () {\n  return [useDispatch, useParams, useNavigate, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/frontend/src/components/User/Profile.jsx"],"names":["useEffect","useState","PostContainer","useDispatch","useSelector","Link","useNavigate","useParams","clearErrors","followUser","getUserDetails","clearChatErrors","addNewChat","toast","BackdropLoader","metaballsMenu","postsIconFill","postsIconOutline","reelsIcon","savedIconFill","savedIconOutline","settingsIcon","taggedIcon","FOLLOW_USER_RESET","USER_DETAILS_RESET","UsersDialog","NEW_CHAT_RESET","MetaData","NotFound","Profile","dispatch","params","navigate","follow","setFollow","viewModal","setViewModal","followersModal","setFollowersModal","usersArr","setUsersArr","savedTab","setSavedTab","user","error","loading","state","userDetails","loggedInUser","followError","success","message","chatError","chat","newChat","handleFollow","_id","handleFollowersModal","followers","handleFollowingModal","following","closeModal","username","type","some","u","addToChat","friendId","users","find","id","name","avatar","posts","length","bio","website","URL","hostname","saved"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,EAAeC,WAAf,EAA4BC,SAA5B,QAA6C,kBAA7C;AACA,SAASC,WAAT,EAAsBC,UAAtB,EAAkCC,cAAlC,QAAwD,0BAAxD;AACA,SAASF,WAAW,IAAIG,eAAxB,EAAyCC,UAAzC,QAA2D,0BAA3D;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,SAASC,aAAT,EAAwBC,aAAxB,EAAuCC,gBAAvC,EAAyDC,SAAzD,EAAoEC,aAApE,EAAmFC,gBAAnF,EAAqGC,YAArG,EAAmHC,UAAnH,QAAqI,YAArI;AACA,SAASC,iBAAT,EAA4BC,kBAA5B,QAAsD,+BAAtD;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,cAAT,QAA+B,+BAA/B;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,QAAP,MAAqB,oBAArB;;;;AAEA,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAAA;;AAElB,QAAMC,QAAQ,GAAG3B,WAAW,EAA5B;AACA,QAAM4B,MAAM,GAAGxB,SAAS,EAAxB;AACA,QAAMyB,QAAQ,GAAG1B,WAAW,EAA5B;AAEA,QAAM,CAAC2B,MAAD,EAASC,SAAT,IAAsBjC,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACkC,SAAD,EAAYC,YAAZ,IAA4BnC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACoC,cAAD,EAAiBC,iBAAjB,IAAsCrC,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM,CAACsC,QAAD,EAAWC,WAAX,IAA0BvC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACwC,QAAD,EAAWC,WAAX,IAA0BzC,QAAQ,CAAC,KAAD,CAAxC;AAEA,QAAM;AAAE0C,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,MAA2BzC,WAAW,CAAE0C,KAAD,IAAWA,KAAK,CAACC,WAAlB,CAA5C;AACA,QAAM;AAAEJ,IAAAA,IAAI,EAAEK;AAAR,MAAyB5C,WAAW,CAAE0C,KAAD,IAAWA,KAAK,CAACH,IAAlB,CAA1C;AACA,QAAM;AAAEC,IAAAA,KAAK,EAAEK,WAAT;AAAsBC,IAAAA,OAAtB;AAA+BC,IAAAA;AAA/B,MAA2C/C,WAAW,CAAE0C,KAAD,IAAWA,KAAK,CAACrC,UAAlB,CAA5D;AACA,QAAM;AAAEmC,IAAAA,KAAK,EAAEQ,SAAT;AAAoBC,IAAAA;AAApB,MAA6BjD,WAAW,CAAE0C,KAAD,IAAWA,KAAK,CAACQ,OAAlB,CAA9C;;AAEA,QAAMC,YAAY,GAAG,MAAM;AACvB;AACAzB,IAAAA,QAAQ,CAACrB,UAAU,CAACkC,IAAI,CAACa,GAAN,CAAX,CAAR;AACH,GAHD;;AAKA,QAAMC,oBAAoB,GAAG,MAAM;AAC/BnB,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAF,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAI,IAAAA,WAAW,CAACG,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEe,SAAP,CAAX;AACH,GAJD;;AAMA,QAAMC,oBAAoB,GAAG,MAAM;AAC/BvB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAE,IAAAA,WAAW,CAACG,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEiB,SAAP,CAAX;AACH,GAJD;;AAMA,QAAMC,UAAU,GAAG,MAAM;AACrBzB,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAFD;;AAIApC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI4C,KAAJ,EAAW;AACP/B,MAAAA,KAAK,CAAC+B,KAAN,CAAYA,KAAZ;AACAd,MAAAA,QAAQ,CAACtB,WAAW,EAAZ,CAAR;AACH;;AACDsB,IAAAA,QAAQ,CAACpB,cAAc,CAACqB,MAAM,CAAC+B,QAAR,CAAf,CAAR;;AAEA,QAAIb,WAAJ,EAAiB;AACbpC,MAAAA,KAAK,CAAC+B,KAAN,CAAYK,WAAZ;AACAnB,MAAAA,QAAQ,CAACtB,WAAW,EAAZ,CAAR;AACH;;AACD,QAAI0C,OAAJ,EAAa;AACTrC,MAAAA,KAAK,CAACqC,OAAN,CAAcC,OAAd;AACArB,MAAAA,QAAQ,CAAC;AAAEiC,QAAAA,IAAI,EAAExC;AAAR,OAAD,CAAR;AACH,KAdW,CAgBZ;AACA;AACA;;AAEH,GApBQ,EAoBN,CAACO,QAAD,EAAWc,KAAX,EAAkBb,MAAM,CAAC+B,QAAzB,EAAmCb,WAAnC,EAAgDC,OAAhD,EAAyDC,OAAzD,CApBM,CAAT;AAsBAnD,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACZ;AACAkC,IAAAA,SAAS,CAACS,IAAD,aAACA,IAAD,0CAACA,IAAI,CAAEe,SAAP,oDAAC,gBAAiBM,IAAjB,CAAuBC,CAAD,IAAOA,CAAC,CAACT,GAAF,KAAUR,YAAY,CAACQ,GAApD,CAAD,CAAT;AACH,GAHQ,EAGN,CAACb,IAAD,CAHM,CAAT;;AAKA,QAAMuB,SAAS,GAAG,MAAM;AACpBpC,IAAAA,QAAQ,CAAClB,UAAU,CAAC+B,IAAI,CAACa,GAAN,CAAX,CAAR;AACH,GAFD;;AAIAxD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIoD,SAAJ,EAAe;AACXvC,MAAAA,KAAK,CAAC+B,KAAN,CAAYQ,SAAZ;AACAtB,MAAAA,QAAQ,CAACnB,eAAe,EAAhB,CAAR;AACH;;AACD,QAAI0C,IAAJ,EAAU;AAAA;;AACN,YAAMc,QAAQ,kBAAGd,IAAI,CAACe,KAAR,gDAAG,YAAYC,IAAZ,CAAkBC,EAAD,IAAQA,EAAE,KAAKtB,YAAY,CAACQ,GAA7C,CAAjB;AACAxB,MAAAA,QAAQ,CAAE,aAAYqB,IAAI,CAACG,GAAI,IAAGW,QAAS,EAAnC,CAAR;AACArC,MAAAA,QAAQ,CAAC;AAAEiC,QAAAA,IAAI,EAAErC;AAAR,OAAD,CAAR;AACH;AACJ,GAVQ,EAUN,CAACI,QAAD,EAAWsB,SAAX,EAAsBC,IAAtB,EAA4BrB,QAA5B,CAVM,CAAT;AAYA,sBACI;AAAA,4BACI,QAAC,QAAD;AAAU,MAAA,KAAK,EAAG,GAAEW,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAE4B,IAAK,MAAK5B,IAAnB,aAAmBA,IAAnB,uBAAmBA,IAAI,CAAEmB,QAAS;AAAnD;AAAA;AAAA;AAAA;AAAA,YADJ,EAGKjB,OAAO,iBAAI,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,YAHhB,EAIKF,IAAI,gBACD;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,8BAEI;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA,gCAGI;AAAK,UAAA,SAAS,EAAC,8CAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,OAAf;AAAuB,YAAA,SAAS,EAAC,qCAAjC;AAAuE,YAAA,GAAG,EAAEA,IAAI,CAAC6B,MAAjF;AAAyF,YAAA,GAAG,EAAC;AAA7F;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAQI;AAAK,UAAA,SAAS,EAAC,yCAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,0DAAf;AAAA,oCAEI;AAAI,cAAA,SAAS,EAAC,gCAAd;AAAA,wBAAgD7B,IAAI,CAACmB;AAArD;AAAA;AAAA;AAAA;AAAA,oBAFJ,EAGMd,YAAY,CAACc,QAAb,KAA0BnB,IAAI,CAACmB,QAAhC,gBACG;AAAK,cAAA,SAAS,EAAC,yBAAf;AAAA,sCACI,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,gBAAT;AAA0B,gBAAA,SAAS,EAAC,+DAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,gBAAT;AAAA,0BAA2BzC;AAA3B;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADH,gBAMG;AAAK,cAAA,SAAS,EAAC,yBAAf;AAAA,yBACKY,MAAM,gBACH;AAAA,wCACI;AAAQ,kBAAA,OAAO,EAAEiC,SAAjB;AAA4B,kBAAA,SAAS,EAAC,yEAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAQ,kBAAA,OAAO,EAAEX,YAAjB;AAA+B,kBAAA,SAAS,EAAC,oGAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA,8BADG,gBAMH;AAAQ,gBAAA,OAAO,EAAEA,YAAjB;AAA+B,gBAAA,SAAS,EAAC,iFAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPR,eASI;AAAM,gBAAA,SAAS,EAAC,iBAAhB;AAAA,0BAAmCxC;AAAnC;AAAA;AAAA;AAAA;AAAA,sBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATR;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAwBI;AAAK,YAAA,SAAS,EAAC,mDAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,sCAAgC;AAAM,gBAAA,SAAS,EAAC,eAAhB;AAAA,yCAAiC4B,IAAI,CAAC8B,KAAtC,gDAAiC,YAAYC;AAA7C;AAAA;AAAA;AAAA;AAAA,sBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAK,cAAA,OAAO,EAAEjB,oBAAd;AAAoC,cAAA,SAAS,EAAC,gBAA9C;AAAA,sCAA+D;AAAM,gBAAA,SAAS,EAAC,eAAhB;AAAA,8CAAiCd,IAAI,CAACe,SAAtC,qDAAiC,iBAAgBgB;AAAjD;AAAA;AAAA;AAAA;AAAA,sBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAK,cAAA,OAAO,EAAEf,oBAAd;AAAoC,cAAA,SAAS,EAAC,gBAA9C;AAAA,sCAA+D;AAAM,gBAAA,SAAS,EAAC,eAAhB;AAAA,6CAAiChB,IAAI,CAACiB,SAAtC,oDAAiC,gBAAgBc;AAAjD;AAAA;AAAA;AAAA;AAAA,sBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxBJ,eA+BI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACI;AAAG,cAAA,SAAS,EAAC,aAAb;AAAA,wBAA4B/B,IAAI,CAAC4B;AAAjC;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAG,cAAA,SAAS,EAAC,qBAAb;AAAA,wBAAoC5B,IAAI,CAACgC;AAAzC;AAAA;AAAA;AAAA;AAAA,oBAFJ,EAGK,CAAAhC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEiC,OAAN,kBACG;AAAG,cAAA,IAAI,EAAEjC,IAAI,CAACiC,OAAd;AAAuB,cAAA,MAAM,EAAC,QAA9B;AAAuC,cAAA,SAAS,EAAC,2BAAjD;AAAA,wBAA8E,IAAIC,GAAJ,CAAQlC,IAAI,CAACiC,OAAb,EAAsBE;AAApG;AAAA;AAAA;AAAA;AAAA,oBAJR;AAAA;AAAA;AAAA;AAAA;AAAA,kBA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,EAoDKzC,cAAc,gBACX,QAAC,WAAD;AAAa,QAAA,KAAK,EAAC,WAAnB;AAA+B,QAAA,IAAI,EAAEF,SAArC;AAAgD,QAAA,OAAO,EAAE0B,UAAzD;AAAqE,QAAA,SAAS,EAAElB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEe;AAAtF;AAAA;AAAA;AAAA;AAAA,cADW,gBAGX,QAAC,WAAD;AAAa,QAAA,KAAK,EAAC,WAAnB;AAA+B,QAAA,IAAI,EAAEvB,SAArC;AAAgD,QAAA,OAAO,EAAE0B,UAAzD;AAAqE,QAAA,SAAS,EAAElB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEiB;AAAtF;AAAA;AAAA;AAAA;AAAA,cAvDR,eA0DI;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA,gCAGI;AAAK,UAAA,SAAS,EAAC,4BAAf;AAAA,kCACI;AAAM,YAAA,OAAO,EAAE,MAAMlB,WAAW,CAAC,KAAD,CAAhC;AAAyC,YAAA,SAAS,EAAG,GAAED,QAAQ,GAAG,eAAH,GAAqB,uBAAwB,+FAA5G;AAAA,uBACKA,QAAQ,GAAGxB,gBAAH,GAAsBD,aADnC;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAGK2B,IAAI,CAACa,GAAL,KAAaR,YAAY,CAACQ,GAA1B,iBACG;AAAM,YAAA,OAAO,EAAE,MAAMd,WAAW,CAAC,IAAD,CAAhC;AAAwC,YAAA,SAAS,EAAG,GAAED,QAAQ,GAAG,uBAAH,GAA6B,eAAgB,+FAA3G;AAAA,uBACKA,QAAQ,GAAGtB,aAAH,GAAmBC,gBADhC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJR,eAOI;AAAM,YAAA,SAAS,EAAC,6FAAhB;AAAA,uBACKF,SADL;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eASI;AAAM,YAAA,SAAS,EAAC,uGAAhB;AAAA,uBACKI,UADL;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,EAiBKmB,QAAQ,gBACL,QAAC,aAAD;AAAe,UAAA,KAAK,EAAEE,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEoC,KAA5B;AAAmC,UAAA,EAAE,EAAE;AAAvC;AAAA;AAAA;AAAA;AAAA,gBADK,GAEL,CAAApC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,4BAAAA,IAAI,CAAE8B,KAAN,8DAAaC,MAAb,IAAsB,CAAtB,gBACI,QAAC,aAAD;AAAe,UAAA,KAAK,EAAE/B,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAE8B,KAA5B;AAAmC,UAAA,EAAE,EAAE;AAAvC;AAAA;AAAA;AAAA;AAAA,gBADJ,gBAEI;AAAK,UAAA,SAAS,EAAC,6HAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,OAAf;AAAuB,YAAA,SAAS,EAAC,iBAAjC;AAAmD,YAAA,GAAG,EAAC,0EAAvD;AAAkI,YAAA,GAAG,EAAC;AAAtI;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAC,oCAAf;AAAA,oCACI;AAAI,cAAA,SAAS,EAAC,gCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBZ;AAAA;AAAA;AAAA;AAAA;AAAA,cA1DJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADC,gBA8FD,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,YAlGR;AAAA,kBADJ;AAwGH,CAzLD;;GAAM5C,O;UAEe1B,W,EACFI,S,EACED,W,EAQgBF,W,EACFA,W,EACkBA,W,EACdA,W;;;KAfjCyB,O;AA2LN,eAAeA,OAAf","sourcesContent":["import { useEffect, useState } from 'react'\nimport PostContainer from './Posts/PostContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { clearErrors, followUser, getUserDetails } from '../../actions/userAction';\nimport { clearErrors as clearChatErrors, addNewChat } from '../../actions/chatAction';\nimport { toast } from 'react-toastify';\nimport BackdropLoader from '../Layouts/BackdropLoader';\nimport { metaballsMenu, postsIconFill, postsIconOutline, reelsIcon, savedIconFill, savedIconOutline, settingsIcon, taggedIcon } from './SvgIcons';\nimport { FOLLOW_USER_RESET, USER_DETAILS_RESET } from '../../constants/userConstants';\nimport UsersDialog from '../Layouts/UsersDialog';\nimport { NEW_CHAT_RESET } from '../../constants/chatConstants';\nimport MetaData from '../Layouts/MetaData';\nimport NotFound from '../Errors/NotFound';\n\nconst Profile = () => {\n\n    const dispatch = useDispatch();\n    const params = useParams();\n    const navigate = useNavigate();\n\n    const [follow, setFollow] = useState(false);\n    const [viewModal, setViewModal] = useState(false);\n    const [followersModal, setFollowersModal] = useState(false);\n    const [usersArr, setUsersArr] = useState([]);\n    const [savedTab, setSavedTab] = useState(false);\n\n    const { user, error, loading } = useSelector((state) => state.userDetails);\n    const { user: loggedInUser } = useSelector((state) => state.user);\n    const { error: followError, success, message } = useSelector((state) => state.followUser);\n    const { error: chatError, chat } = useSelector((state) => state.newChat);\n\n    const handleFollow = () => {\n        // setFollow(!follow); \n        dispatch(followUser(user._id));\n    }\n\n    const handleFollowersModal = () => {\n        setFollowersModal(true);\n        setViewModal(true)\n        setUsersArr(user?.followers);\n    }\n\n    const handleFollowingModal = () => {\n        setViewModal(true)\n        setFollowersModal(false);\n        setUsersArr(user?.following);\n    }\n\n    const closeModal = () => {\n        setViewModal(false)\n    }\n\n    useEffect(() => {\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        dispatch(getUserDetails(params.username));\n\n        if (followError) {\n            toast.error(followError);\n            dispatch(clearErrors());\n        }\n        if (success) {\n            toast.success(message)\n            dispatch({ type: FOLLOW_USER_RESET });\n        }\n\n        // return () => {\n        //     dispatch({ type: USER_DETAILS_RESET })\n        // }\n\n    }, [dispatch, error, params.username, followError, success, message]);\n\n    useEffect(() => {\n        // console.log(user?.followers?.some((id) => id === loggedInUser._id))\n        setFollow(user?.followers?.some((u) => u._id === loggedInUser._id))\n    }, [user]);\n\n    const addToChat = () => {\n        dispatch(addNewChat(user._id));\n    }\n\n    useEffect(() => {\n        if (chatError) {\n            toast.error(chatError);\n            dispatch(clearChatErrors());\n        }\n        if (chat) {\n            const friendId = chat.users?.find((id) => id !== loggedInUser._id);\n            navigate(`/direct/t/${chat._id}/${friendId}`);\n            dispatch({ type: NEW_CHAT_RESET });\n        }\n    }, [dispatch, chatError, chat, navigate]);\n\n    return (\n        <>\n            <MetaData title={`${user?.name} (@${user?.username}) • Instagram photos and videos`} />\n\n            {loading && <BackdropLoader />}\n            {user ?\n                <div className=\"mt-16 xl:w-2/3 mx-auto\">\n\n                    <div className=\"sm:flex w-full sm:py-8\">\n\n                        {/* profile picture */}\n                        <div className=\"sm:w-1/3 flex justify-center mx-auto sm:mx-0\">\n                            <img draggable=\"false\" className=\"w-40 h-40 rounded-full object-cover\" src={user.avatar} alt=\"\" />\n                        </div>\n\n                        {/* profile details */}\n                        <div className=\"flex flex-col gap-6 p-4 sm:w-2/3 sm:p-1\">\n                            <div className=\"flex items-center gap-8 sm:justify-start justify-between\">\n\n                                <h2 className=\"text-2xl sm:text-3xl font-thin\">{user.username}</h2>\n                                {(loggedInUser.username === user.username) ? (\n                                    <div className=\"flex gap-3 items-center\">\n                                        <Link to=\"/accounts/edit\" className=\"border font-medium hover:bg-gray-50 text-sm rounded px-2 py-1\">Edit Profile</Link>\n                                        <Link to=\"/accounts/edit\">{settingsIcon}</Link>\n                                    </div>\n                                ) : (\n                                    <div className=\"flex gap-3 items-center\">\n                                        {follow ? (\n                                            <>\n                                                <button onClick={addToChat} className=\"border rounded px-2.5 py-[0.3rem] text-sm font-medium hover:bg-gray-100\">Message</button>\n                                                <button onClick={handleFollow} className=\"font-medium text-sm bg-red-50 rounded py-1.5 px-3 text-red-600 hover:bg-red-100 hover:text-red-700\">Unfollow</button>\n                                            </>\n                                        ) : (\n                                            <button onClick={handleFollow} className=\"font-medium bg-primary-blue text-sm text-white hover:shadow rounded px-6 py-1.5\">Follow</button>\n                                        )}\n                                        <span className=\"sm:block hidden\">{metaballsMenu}</span>\n                                    </div>\n                                )}\n                            </div>\n\n                            <div className=\"flex justify-between items-center max-w-[21.5rem]\">\n                                <div className=\"cursor-pointer\"><span className=\"font-semibold\">{user.posts?.length}</span> posts</div>\n                                <div onClick={handleFollowersModal} className=\"cursor-pointer\"><span className=\"font-semibold\">{user.followers?.length}</span> followers</div>\n                                <div onClick={handleFollowingModal} className=\"cursor-pointer\"><span className=\"font-semibold\">{user.following?.length}</span> following</div>\n                            </div>\n\n                            {/* bio */}\n                            <div className=\"max-w-full\">\n                                <p className=\"font-medium\">{user.name}</p>\n                                <p className=\"whitespace-pre-line\">{user.bio}</p>\n                                {user?.website &&\n                                    <a href={user.website} target=\"_blank\" className=\"text-blue-900 font-medium\">{new URL(user.website).hostname}</a>\n                                }\n                            </div>\n                        </div>\n\n                    </div>\n\n                    {followersModal ?\n                        <UsersDialog title=\"Followers\" open={viewModal} onClose={closeModal} usersList={user?.followers} />\n                        :\n                        <UsersDialog title=\"Following\" open={viewModal} onClose={closeModal} usersList={user?.following} />\n                    }\n\n                    <div className=\"border-t sm:ml-8 sm:mr-14\">\n\n                        {/* tabs */}\n                        <div className=\"flex gap-12 justify-center\">\n                            <span onClick={() => setSavedTab(false)} className={`${savedTab ? 'text-gray-400' : 'border-t border-black'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`}>\n                                {savedTab ? postsIconOutline : postsIconFill} posts</span>\n                            {user._id === loggedInUser._id && (\n                                <span onClick={() => setSavedTab(true)} className={`${savedTab ? 'border-t border-black' : 'text-gray-400'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`}>\n                                    {savedTab ? savedIconFill : savedIconOutline} saved</span>\n                            )}\n                            <span className=\"py-3 flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\">\n                                {reelsIcon} reels</span>\n                            <span className=\"py-3 hidden sm:flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\">\n                                {taggedIcon} tagged</span>\n                        </div>\n\n                        {/* posts grid data */}\n                        {savedTab ?\n                            <PostContainer posts={user?.saved} id={\"saved\"} /> :\n                            user?.posts?.length > 0 ?\n                                <PostContainer posts={user?.posts} id={\"posts\"} /> :\n                                <div className=\"bg-white mt-2 mb-10 drop-shadow-sm rounded flex sm:flex-row flex-col sm:gap-0 gap-5 sm:p-0 p-4 items-center justify-between\">\n                                    <img draggable=\"false\" className=\"w-2/5 rounded-l\" src=\"https://www.instagram.com/static/images/mediaUpsell.jpg/6efc710a1d5a.jpg\" alt=\"\" />\n                                    <div className=\"mx-auto flex flex-col items-center\">\n                                        <h4 className=\"font-medium text-lg sm:text-xl\">Start capturing and sharing your moments.</h4>\n                                        <p>Get the app to share your first photo or video.</p>\n                                    </div>\n\n                                </div>\n                        }\n\n                    </div>\n\n                </div>\n                :\n                <NotFound />\n            }\n\n        </>\n    )\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}