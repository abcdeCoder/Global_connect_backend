{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder (4)\\\\instagram-mern-main\\\\frontend\\\\src\\\\components\\\\Chats\\\\Inbox.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { clearErrors, getAllMessages, sendMessage } from '../../actions/messageAction';\nimport { getUserDetailsById } from '../../actions/userAction';\nimport { ALL_MESSAGES_ADD, NEW_MESSAGE_RESET } from '../../constants/messageConstants';\nimport { SOCKET_ENDPOINT } from '../../utils/constants';\nimport Sidebar from './Sidebar';\nimport { io } from 'socket.io-client';\nimport Message from './Message';\nimport { Picker } from 'emoji-mart';\nimport SearchModal from './SearchModal';\nimport SpinLoader from '../Layouts/SpinLoader';\nimport MetaData from '../Layouts/MetaData';\nimport { USER_DETAILS_RESET } from '../../constants/userConstants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Inbox = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const params = useParams();\n  const [message, setMessage] = useState(\"\");\n  const [arrivalMessage, setArrivalMessage] = useState(null);\n  const scrollRef = useRef(null);\n  const socket = useRef(null);\n  const [typing, setTyping] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingData, setTypingData] = useState({});\n  const [isOnline, setIsOnline] = useState(false);\n  const [showEmojis, setShowEmojis] = useState(false);\n  const [showSearch, setShowSearch] = useState(false);\n  const {\n    user: loggedInUser\n  } = useSelector(state => state.user);\n  const {\n    user: friend\n  } = useSelector(state => state.userDetails);\n  const {\n    error,\n    messages,\n    loading\n  } = useSelector(state => state.allMessages);\n  const {\n    success,\n    newMessage\n  } = useSelector(state => state.newMessage);\n  const userId = params.userId;\n  useEffect(() => {\n    socket.current = io(SOCKET_ENDPOINT);\n    socket.current.on(\"getMessage\", data => {\n      setArrivalMessage({\n        sender: data.senderId,\n        content: data.content,\n        createdAt: Date.now()\n      });\n    });\n    socket.current.on(\"typing\", senderId => {\n      setTypingData({\n        senderId,\n        typing: true\n      });\n    });\n    socket.current.on(\"typing stop\", senderId => {\n      setTypingData({\n        senderId,\n        typing: false\n      });\n    });\n  }, []);\n  useEffect(() => {\n    typingData && typingData.senderId === userId && setIsTyping(typingData.typing);\n  }, [typingData, userId]);\n  useEffect(() => {\n    arrivalMessage && arrivalMessage.sender === userId && dispatch({\n      type: ALL_MESSAGES_ADD,\n      payload: arrivalMessage\n    }); // console.log(arrivalMessage);\n  }, [arrivalMessage, userId]);\n  useEffect(() => {\n    socket.current.emit(\"addUser\", loggedInUser._id);\n    socket.current.on(\"getUsers\", users => {\n      // console.log(users);\n      setIsOnline(users.some(u => u.userId === userId));\n    });\n  }, [loggedInUser._id, userId]);\n  useEffect(() => {\n    if (error) {\n      toast.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (params.chatId && userId) {\n      dispatch(getAllMessages(params.chatId));\n      dispatch(getUserDetailsById(userId));\n    }\n\n    return () => {\n      dispatch({\n        type: USER_DETAILS_RESET\n      });\n    };\n  }, [dispatch, error, params.chatId, userId]);\n  useEffect(() => {\n    if (success) {\n      dispatch({\n        type: ALL_MESSAGES_ADD,\n        payload: newMessage\n      });\n      dispatch({\n        type: NEW_MESSAGE_RESET\n      });\n    }\n  }, [dispatch, success]);\n\n  const handleSubmit = function (e) {\n    let msg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : message;\n    e.preventDefault();\n    socket === null || socket === void 0 ? void 0 : socket.current.emit(\"sendMessage\", {\n      senderId: loggedInUser._id,\n      receiverId: userId,\n      content: msg\n    });\n    const msgData = {\n      chatId: params.chatId,\n      content: msg\n    };\n    dispatch(sendMessage(msgData));\n    setMessage(\"\");\n  };\n\n  useEffect(() => {\n    var _scrollRef$current;\n\n    (_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  const handleTyping = e => {\n    setMessage(e.target.value);\n\n    if (!typing) {\n      setTyping(true);\n      socket === null || socket === void 0 ? void 0 : socket.current.emit(\"typing\", {\n        senderId: loggedInUser._id,\n        receiverId: userId\n      });\n    }\n\n    setTimeout(() => {\n      socket === null || socket === void 0 ? void 0 : socket.current.emit(\"typing stop\", {\n        senderId: loggedInUser._id,\n        receiverId: userId\n      });\n      setTyping(false);\n    }, 2000);\n  };\n\n  const handleModalClose = () => {\n    setShowSearch(false);\n  };\n\n  const openModal = () => {\n    setShowSearch(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: \"Instagram \\u2022 Chats\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-14 sm:mt-[4.7rem] pb-4 rounded h-[90vh] xl:w-2/3 mx-auto sm:pr-14 sm:pl-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border h-full rounded w-full bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n          openModal: openModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), !userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center w-full sm:w-4/6 gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-24 h-24 flex items-center p-2 justify-center border-2 border-black rounded-full\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              draggable: \"false\",\n              loading: \"lazy\",\n              className: \"w-full h-full rotate-12 object-contain\",\n              src: \"https://static.thenounproject.com/png/172101-200.png\",\n              alt: \"message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-thin\",\n            children: \"Your Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400 text-sm\",\n            children: \"Send private photos and messages to a friend or group.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: openModal,\n            className: \"bg-primary-blue rounded px-2.5 mt-2 py-1.5 text-white text-sm font-medium hover:drop-shadow-lg\",\n            children: \"Send Message\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col justify-between w-full sm:w-4/6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex py-3 px-6 border-b items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  draggable: \"false\",\n                  loading: \"lazy\",\n                  className: \"w-full h-full rounded-full object-cover\",\n                  src: friend.avatar,\n                  alt: \"avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 41\n                }, this), isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -right-0.5 -bottom-0.5 h-3 w-3 bg-green-500 rounded-full\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 54\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium cursor-pointer\",\n                children: friend.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"cursor-pointer\",\n              \"aria-label\": \"View Thread Details\",\n              color: \"#262626\",\n              fill: \"#262626\",\n              height: \"24\",\n              role: \"img\",\n              viewBox: \"0 0 24 24\",\n              width: \"24\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"12.001\",\n                cy: \"12.005\",\n                fill: \"none\",\n                r: \"10.5\",\n                stroke: \"currentColor\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 183\n              }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"11.819\",\n                cy: \"7.709\",\n                r: \"1.25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 328\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                x1: \"10.569\",\n                x2: \"13.432\",\n                y1: \"16.777\",\n                y2: \"16.777\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 377\n              }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                fill: \"none\",\n                points: \"10.569 11.05 12 11.05 12 16.777\",\n                stroke: \"currentColor\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 533\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full flex-1 flex flex-col gap-1.5 overflow-y-auto overflow-x-hidden p-4\",\n            children: [loading ? /*#__PURE__*/_jsxDEV(SpinLoader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 44\n            }, this) : messages.map((m, i) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Message, {\n                ownMsg: m.sender === loggedInUser._id,\n                ...friend,\n                ...m\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: scrollRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 45\n              }, this)]\n            }, m._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 41\n            }, this)), isTyping && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 max-w-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  draggable: \"false\",\n                  loading: \"lazy\",\n                  className: \"w-7 h-7 rounded-full object-cover\",\n                  src: friend.avatar,\n                  alt: \"avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"typing...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: scrollRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"flex items-center gap-3 justify-between border rounded-full py-2.5 px-4 m-5 relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => setShowEmojis(!showEmojis),\n              className: \"cursor-pointer hover:opacity-60\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                \"aria-label\": \"Emoji\",\n                color: \"#262626\",\n                fill: \"#262626\",\n                height: \"24\",\n                role: \"img\",\n                viewBox: \"0 0 24 24\",\n                width: \"24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M15.83 10.997a1.167 1.167 0 101.167 1.167 1.167 1.167 0 00-1.167-1.167zm-6.5 1.167a1.167 1.167 0 10-1.166 1.167 1.167 1.167 0 001.166-1.167zm5.163 3.24a3.406 3.406 0 01-4.982.007 1 1 0 10-1.557 1.256 5.397 5.397 0 008.09 0 1 1 0 00-1.55-1.263zM12 .503a11.5 11.5 0 1011.5 11.5A11.513 11.513 0 0012 .503zm0 21a9.5 9.5 0 119.5-9.5 9.51 9.51 0 01-9.5 9.5z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 146\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 33\n            }, this), showEmojis && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-14 -left-10\",\n              children: /*#__PURE__*/_jsxDEV(Picker, {\n                set: \"google\",\n                onSelect: e => setMessage(message + e.native),\n                title: \"Emojis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"flex-1 outline-none text-sm\",\n              type: \"text\",\n              placeholder: \"Message...\",\n              value: message,\n              onFocus: () => setShowEmojis(false),\n              onChange: handleTyping,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 33\n            }, this), message.trim().length > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-primary-blue font-medium text-sm\",\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"cursor-pointer\",\n                \"aria-label\": \"Add Photo or Video\",\n                color: \"#262626\",\n                fill: \"#262626\",\n                height: \"24\",\n                role: \"img\",\n                viewBox: \"0 0 24 24\",\n                width: \"24\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M6.549 5.013A1.557 1.557 0 108.106 6.57a1.557 1.557 0 00-1.557-1.557z\",\n                  fillRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 190\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M2 18.605l3.901-3.9a.908.908 0 011.284 0l2.807 2.806a.908.908 0 001.283 0l5.534-5.534a.908.908 0 011.283 0l3.905 3.905\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 296\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M18.44 2.004A3.56 3.56 0 0122 5.564h0v12.873a3.56 3.56 0 01-3.56 3.56H5.568a3.56 3.56 0 01-3.56-3.56V5.563a3.56 3.56 0 013.56-3.56z\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 505\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n                onClick: e => handleSubmit(e, '❤️'),\n                className: \"hover:opacity-70 cursor-pointer\",\n                \"aria-label\": \"Like\",\n                color: \"#262626\",\n                fill: \"#262626\",\n                height: \"24\",\n                role: \"img\",\n                viewBox: \"0 0 24 24\",\n                width: \"24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 232\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchModal, {\n        open: showSearch,\n        onClose: handleModalClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Inbox, \"XIQQ82+HmcB+sL27eYdJRAW8bUs=\", false, function () {\n  return [useDispatch, useParams, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Inbox;\nexport default Inbox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Inbox\");","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/frontend/src/components/Chats/Inbox.jsx"],"names":["React","useEffect","useRef","useState","useDispatch","useSelector","useParams","toast","clearErrors","getAllMessages","sendMessage","getUserDetailsById","ALL_MESSAGES_ADD","NEW_MESSAGE_RESET","SOCKET_ENDPOINT","Sidebar","io","Message","Picker","SearchModal","SpinLoader","MetaData","USER_DETAILS_RESET","Inbox","dispatch","params","message","setMessage","arrivalMessage","setArrivalMessage","scrollRef","socket","typing","setTyping","isTyping","setIsTyping","typingData","setTypingData","isOnline","setIsOnline","showEmojis","setShowEmojis","showSearch","setShowSearch","user","loggedInUser","state","friend","userDetails","error","messages","loading","allMessages","success","newMessage","userId","current","on","data","sender","senderId","content","createdAt","Date","now","type","payload","emit","_id","users","some","u","chatId","handleSubmit","e","msg","preventDefault","receiverId","msgData","scrollIntoView","behavior","handleTyping","target","value","setTimeout","handleModalClose","openModal","avatar","name","map","m","i","native","trim","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { clearErrors, getAllMessages, sendMessage } from '../../actions/messageAction';\nimport { getUserDetailsById } from '../../actions/userAction';\nimport { ALL_MESSAGES_ADD, NEW_MESSAGE_RESET } from '../../constants/messageConstants';\nimport { SOCKET_ENDPOINT } from '../../utils/constants';\nimport Sidebar from './Sidebar';\nimport { io } from 'socket.io-client';\nimport Message from './Message';\nimport { Picker } from 'emoji-mart'\nimport SearchModal from './SearchModal';\nimport SpinLoader from '../Layouts/SpinLoader';\nimport MetaData from '../Layouts/MetaData';\nimport { USER_DETAILS_RESET } from '../../constants/userConstants';\n\nconst Inbox = () => {\n\n    const dispatch = useDispatch();\n    const params = useParams();\n\n    const [message, setMessage] = useState(\"\");\n    const [arrivalMessage, setArrivalMessage] = useState(null);\n    const scrollRef = useRef(null);\n    const socket = useRef(null);\n\n    const [typing, setTyping] = useState(false);\n    const [isTyping, setIsTyping] = useState(false);\n    const [typingData, setTypingData] = useState({});\n\n    const [isOnline, setIsOnline] = useState(false);\n    const [showEmojis, setShowEmojis] = useState(false);\n\n    const [showSearch, setShowSearch] = useState(false);\n\n    const { user: loggedInUser } = useSelector((state) => state.user)\n    const { user: friend } = useSelector((state) => state.userDetails);\n    const { error, messages, loading } = useSelector((state) => state.allMessages)\n    const { success, newMessage } = useSelector((state) => state.newMessage);\n\n    const userId = params.userId;\n\n    useEffect(() => {\n        socket.current = io(SOCKET_ENDPOINT);\n        socket.current.on(\"getMessage\", (data) => {\n            setArrivalMessage({\n                sender: data.senderId,\n                content: data.content,\n                createdAt: Date.now(),\n            });\n        });\n        socket.current.on(\"typing\", (senderId) => {\n            setTypingData({ senderId, typing: true })\n        });\n        socket.current.on(\"typing stop\", (senderId) => {\n            setTypingData({ senderId, typing: false })\n        });\n    }, []);\n\n    useEffect(() => {\n        typingData && typingData.senderId === userId &&\n            setIsTyping(typingData.typing)\n    }, [typingData, userId])\n\n\n    useEffect(() => {\n        arrivalMessage && arrivalMessage.sender === userId &&\n            dispatch({\n                type: ALL_MESSAGES_ADD,\n                payload: arrivalMessage\n            });\n        // console.log(arrivalMessage);\n    }, [arrivalMessage, userId])\n\n\n    useEffect(() => {\n        socket.current.emit(\"addUser\", loggedInUser._id);\n        socket.current.on(\"getUsers\", users => {\n            // console.log(users);\n            setIsOnline(users.some((u) => u.userId === userId));\n        })\n    }, [loggedInUser._id, userId])\n\n    useEffect(() => {\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        if (params.chatId && userId) {\n            dispatch(getAllMessages(params.chatId));\n            dispatch(getUserDetailsById(userId));\n        }\n\n        return () => {\n            dispatch({ type: USER_DETAILS_RESET })\n        }\n\n    }, [dispatch, error, params.chatId, userId]);\n\n    useEffect(() => {\n        if (success) {\n            dispatch({\n                type: ALL_MESSAGES_ADD,\n                payload: newMessage\n            })\n            dispatch({ type: NEW_MESSAGE_RESET });\n        }\n    }, [dispatch, success])\n\n\n    const handleSubmit = (e, msg = message) => {\n        e.preventDefault();\n\n        socket?.current.emit(\"sendMessage\", {\n            senderId: loggedInUser._id,\n            receiverId: userId,\n            content: msg,\n        });\n\n        const msgData = {\n            chatId: params.chatId,\n            content: msg\n        }\n\n        dispatch(sendMessage(msgData));\n        setMessage(\"\");\n    }\n\n    useEffect(() => {\n        scrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\n    }, [messages]);\n\n    const handleTyping = (e) => {\n        setMessage(e.target.value);\n\n        if (!typing) {\n            setTyping(true);\n            socket?.current.emit(\"typing\", {\n                senderId: loggedInUser._id,\n                receiverId: userId\n            });\n        }\n\n        setTimeout(() => {\n            socket?.current.emit(\"typing stop\", {\n                senderId: loggedInUser._id,\n                receiverId: userId\n            });\n            setTyping(false);\n        }, 2000);\n    }\n\n    const handleModalClose = () => {\n        setShowSearch(false);\n    }\n\n    const openModal = () => {\n        setShowSearch(true);\n    }\n\n    return (\n        <>\n            <MetaData title=\"Instagram • Chats\" />\n\n            <div className=\"mt-14 sm:mt-[4.7rem] pb-4 rounded h-[90vh] xl:w-2/3 mx-auto sm:pr-14 sm:pl-8\">\n                <div className=\"flex border h-full rounded w-full bg-white\">\n\n                    {/* sidebar */}\n                    <Sidebar openModal={openModal} />\n\n                    {!userId ?\n                        <div className=\"flex flex-col items-center justify-center w-full sm:w-4/6 gap-2\">\n                            <div className=\"w-24 h-24 flex items-center p-2 justify-center border-2 border-black rounded-full\">\n                                <img draggable=\"false\" loading=\"lazy\" className=\"w-full h-full rotate-12 object-contain\" src=\"https://static.thenounproject.com/png/172101-200.png\" alt=\"message\" />\n                            </div>\n                            <h2 className=\"text-2xl font-thin\">Your Messages</h2>\n                            <p className=\"text-gray-400 text-sm\">Send private photos and messages to a friend or group.</p>\n                            <button onClick={openModal} className=\"bg-primary-blue rounded px-2.5 mt-2 py-1.5 text-white text-sm font-medium hover:drop-shadow-lg\">Send Message</button>\n                        </div>\n                        :\n                        <div className=\"flex flex-col justify-between w-full sm:w-4/6\">\n\n                            {/* header */}\n                            <div className=\"flex py-3 px-6 border-b items-center justify-between\">\n                                <div className=\"flex gap-2 items-center\">\n                                    <div className=\"w-8 h-8 relative\">\n                                        <img draggable=\"false\" loading=\"lazy\" className=\"w-full h-full rounded-full object-cover\" src={friend.avatar} alt=\"avatar\" />\n                                        {isOnline && <div className=\"absolute -right-0.5 -bottom-0.5 h-3 w-3 bg-green-500 rounded-full\"></div>}\n                                    </div>\n                                    <span className=\"font-medium cursor-pointer\">{friend.name}</span>\n                                </div>\n                                <svg className=\"cursor-pointer\" aria-label=\"View Thread Details\" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><circle cx=\"12.001\" cy=\"12.005\" fill=\"none\" r=\"10.5\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\"></circle><circle cx=\"11.819\" cy=\"7.709\" r=\"1.25\"></circle><line fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" x1=\"10.569\" x2=\"13.432\" y1=\"16.777\" y2=\"16.777\"></line><polyline fill=\"none\" points=\"10.569 11.05 12 11.05 12 16.777\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\"></polyline></svg>\n                            </div>\n\n                            {/* messages */}\n                            <div className=\"w-full flex-1 flex flex-col gap-1.5 overflow-y-auto overflow-x-hidden p-4\">\n                                {loading ? <SpinLoader /> :\n                                    messages.map((m, i) => (\n                                        <React.Fragment key={m._id}>\n                                            <Message ownMsg={m.sender === loggedInUser._id} {...friend} {...m} />\n                                            <div ref={scrollRef}></div>\n                                        </React.Fragment>\n                                    ))\n                                }\n                                {isTyping &&\n                                    <>\n                                        <div className=\"flex items-center gap-3 max-w-xs\">\n                                            <img draggable=\"false\" loading=\"lazy\" className=\"w-7 h-7 rounded-full object-cover\" src={friend.avatar} alt=\"avatar\" />\n                                            <span className=\"text-sm text-gray-500\">typing...</span>\n                                        </div>\n                                        <div ref={scrollRef}></div>\n                                    </>\n                                }\n                            </div>\n\n                            {/* message input */}\n                            <form onSubmit={handleSubmit} className=\"flex items-center gap-3 justify-between border rounded-full py-2.5 px-4 m-5 relative\">\n                                <span onClick={() => setShowEmojis(!showEmojis)} className=\"cursor-pointer hover:opacity-60\">\n                                    <svg aria-label=\"Emoji\" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M15.83 10.997a1.167 1.167 0 101.167 1.167 1.167 1.167 0 00-1.167-1.167zm-6.5 1.167a1.167 1.167 0 10-1.166 1.167 1.167 1.167 0 001.166-1.167zm5.163 3.24a3.406 3.406 0 01-4.982.007 1 1 0 10-1.557 1.256 5.397 5.397 0 008.09 0 1 1 0 00-1.55-1.263zM12 .503a11.5 11.5 0 1011.5 11.5A11.513 11.513 0 0012 .503zm0 21a9.5 9.5 0 119.5-9.5 9.51 9.51 0 01-9.5 9.5z\"></path></svg>\n                                </span>\n\n                                {showEmojis && (\n                                    <div className=\"absolute bottom-14 -left-10\">\n                                        <Picker\n                                            set=\"google\"\n                                            onSelect={(e) => setMessage(message + e.native)}\n                                            title=\"Emojis\"\n                                        />\n                                    </div>\n                                )}\n\n                                <input\n                                    className=\"flex-1 outline-none text-sm\"\n                                    type=\"text\"\n                                    placeholder=\"Message...\"\n                                    value={message}\n                                    onFocus={() => setShowEmojis(false)}\n                                    onChange={handleTyping}\n                                    required\n                                />\n                                {message.trim().length > 0 ?\n                                    <button className=\"text-primary-blue font-medium text-sm\">Send</button>\n                                    :\n                                    <>\n                                        <svg className=\"cursor-pointer\" aria-label=\"Add Photo or Video\" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M6.549 5.013A1.557 1.557 0 108.106 6.57a1.557 1.557 0 00-1.557-1.557z\" fillRule=\"evenodd\"></path><path d=\"M2 18.605l3.901-3.9a.908.908 0 011.284 0l2.807 2.806a.908.908 0 001.283 0l5.534-5.534a.908.908 0 011.283 0l3.905 3.905\" fill=\"none\" stroke=\"currentColor\" strokeLinejoin=\"round\" strokeWidth=\"2\"></path><path d=\"M18.44 2.004A3.56 3.56 0 0122 5.564h0v12.873a3.56 3.56 0 01-3.56 3.56H5.568a3.56 3.56 0 01-3.56-3.56V5.563a3.56 3.56 0 013.56-3.56z\" fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\"></path></svg>\n                                        <svg onClick={(e) => handleSubmit(e, '❤️')} className=\"hover:opacity-70 cursor-pointer\" aria-label=\"Like\" color=\"#262626\" fill=\"#262626\" height=\"24\" role=\"img\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"></path></svg>\n                                    </>\n                                }\n                            </form>\n\n                        </div>\n\n                    }\n                </div>\n\n                <SearchModal open={showSearch} onClose={handleModalClose} />\n\n            </div>\n        </>\n    )\n}\n\nexport default Inbox"]},"metadata":{},"sourceType":"module"}