{"ast":null,"code":"import _slicedToArray from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import PostContainer from'./Posts/PostContainer';import{useDispatch,useSelector}from'react-redux';import{Link,useNavigate,useParams}from'react-router-dom';import{clearErrors,followUser,getUserDetails}from'../../actions/userAction';import{clearErrors as clearChatErrors,addNewChat}from'../../actions/chatAction';import{toast}from'react-toastify';import BackdropLoader from'../Layouts/BackdropLoader';import{metaballsMenu,postsIconFill,postsIconOutline,reelsIcon,savedIconFill,savedIconOutline,settingsIcon,taggedIcon}from'./SvgIcons';import{FOLLOW_USER_RESET,USER_DETAILS_RESET}from'../../constants/userConstants';import UsersDialog from'../Layouts/UsersDialog';import{NEW_CHAT_RESET}from'../../constants/chatConstants';import MetaData from'../Layouts/MetaData';import NotFound from'../Errors/NotFound';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _user$posts,_user$followers2,_user$following,_user$posts2;var dispatch=useDispatch();var params=useParams();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),follow=_useState2[0],setFollow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),viewModal=_useState4[0],setViewModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),followersModal=_useState6[0],setFollowersModal=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),usersArr=_useState8[0],setUsersArr=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),savedTab=_useState10[0],setSavedTab=_useState10[1];var _useSelector=useSelector(function(state){return state.userDetails;}),user=_useSelector.user,error=_useSelector.error,loading=_useSelector.loading;var _useSelector2=useSelector(function(state){return state.user;}),loggedInUser=_useSelector2.user;var _useSelector3=useSelector(function(state){return state.followUser;}),followError=_useSelector3.error,success=_useSelector3.success,message=_useSelector3.message;var _useSelector4=useSelector(function(state){return state.newChat;}),chatError=_useSelector4.error,chat=_useSelector4.chat;var handleFollow=function handleFollow(){// setFollow(!follow); \ndispatch(followUser(user._id));};var handleFollowersModal=function handleFollowersModal(){setFollowersModal(true);setViewModal(true);setUsersArr(user===null||user===void 0?void 0:user.followers);};var handleFollowingModal=function handleFollowingModal(){setViewModal(true);setFollowersModal(false);setUsersArr(user===null||user===void 0?void 0:user.following);};var closeModal=function closeModal(){setViewModal(false);};useEffect(function(){if(error){toast.error(error);dispatch(clearErrors());}dispatch(getUserDetails(params.username));if(followError){toast.error(followError);dispatch(clearErrors());}if(success){toast.success(message);dispatch({type:FOLLOW_USER_RESET});}// return () => {\n//     dispatch({ type: USER_DETAILS_RESET })\n// }\n},[dispatch,error,params.username,followError,success,message]);useEffect(function(){var _user$followers;// console.log(user?.followers?.some((id) => id === loggedInUser._id))\nsetFollow(user===null||user===void 0?void 0:(_user$followers=user.followers)===null||_user$followers===void 0?void 0:_user$followers.some(function(u){return u._id===loggedInUser._id;}));},[user]);var addToChat=function addToChat(){dispatch(addNewChat(user._id));};useEffect(function(){if(chatError){toast.error(chatError);dispatch(clearChatErrors());}if(chat){var _chat$users;var friendId=(_chat$users=chat.users)===null||_chat$users===void 0?void 0:_chat$users.find(function(id){return id!==loggedInUser._id;});navigate(\"/direct/t/\".concat(chat._id,\"/\").concat(friendId));dispatch({type:NEW_CHAT_RESET});}},[dispatch,chatError,chat,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"\".concat(user===null||user===void 0?void 0:user.name,\" (@\").concat(user===null||user===void 0?void 0:user.username,\") \\u2022 Instagram photos and videos\")}),loading&&/*#__PURE__*/_jsx(BackdropLoader,{}),user?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16 xl:w-2/3 mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:flex w-full sm:py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-1/3 flex justify-center mx-auto sm:mx-0\",children:/*#__PURE__*/_jsx(\"img\",{draggable:\"false\",className:\"w-40 h-40 rounded-full object-cover\",src:user.avatar,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-6 p-4 sm:w-2/3 sm:p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-8 sm:justify-start justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl sm:text-3xl font-thin\",children:user.username}),loggedInUser.username===user.username?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/accounts/edit\",className:\"border font-medium hover:bg-gray-50 text-sm rounded px-2 py-1\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(Link,{to:\"/accounts/edit\",children:settingsIcon})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 items-center\",children:[follow?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:addToChat,className:\"border rounded px-2.5 py-[0.3rem] text-sm font-medium hover:bg-gray-100\",children:\"Message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,className:\"font-medium text-sm bg-red-50 rounded py-1.5 px-3 text-red-600 hover:bg-red-100 hover:text-red-700\",children:\"Unfollow\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,className:\"font-medium bg-primary-blue text-sm text-white hover:shadow rounded px-6 py-1.5\",children:\"Follow\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:block hidden\",children:metaballsMenu})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center max-w-[21.5rem]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:(_user$posts=user.posts)===null||_user$posts===void 0?void 0:_user$posts.length}),\" posts\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleFollowersModal,className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:(_user$followers2=user.followers)===null||_user$followers2===void 0?void 0:_user$followers2.length}),\" followers\"]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleFollowingModal,className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:(_user$following=user.following)===null||_user$following===void 0?void 0:_user$following.length}),\" following\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-full\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"whitespace-pre-line\",children:user.bio}),(user===null||user===void 0?void 0:user.website)&&/*#__PURE__*/_jsx(\"a\",{href:user.website,target:\"_blank\",className:\"text-blue-900 font-medium\",children:new URL(user.website).hostname})]})]})]}),followersModal?/*#__PURE__*/_jsx(UsersDialog,{title:\"Followers\",open:viewModal,onClose:closeModal,usersList:user===null||user===void 0?void 0:user.followers}):/*#__PURE__*/_jsx(UsersDialog,{title:\"Following\",open:viewModal,onClose:closeModal,usersList:user===null||user===void 0?void 0:user.following}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t sm:ml-8 sm:mr-14\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-12 justify-center\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setSavedTab(false);},className:\"\".concat(savedTab?'text-gray-400':'border-t border-black',\" py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium\"),children:[savedTab?postsIconOutline:postsIconFill,\" posts\"]}),user._id===loggedInUser._id&&/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setSavedTab(true);},className:\"\".concat(savedTab?'border-t border-black':'text-gray-400',\" py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium\"),children:[savedTab?savedIconFill:savedIconOutline,\" saved\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"py-3 flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\",children:[reelsIcon,\" reels\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"py-3 hidden sm:flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\",children:[taggedIcon,\" tagged\"]})]}),savedTab?/*#__PURE__*/_jsx(PostContainer,{posts:user===null||user===void 0?void 0:user.saved,id:\"saved\"}):(user===null||user===void 0?void 0:(_user$posts2=user.posts)===null||_user$posts2===void 0?void 0:_user$posts2.length)>0?/*#__PURE__*/_jsx(PostContainer,{posts:user===null||user===void 0?void 0:user.posts,id:\"posts\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white mt-2 mb-10 drop-shadow-sm rounded flex sm:flex-row flex-col sm:gap-0 gap-5 sm:p-0 p-4 items-center justify-between\",children:[/*#__PURE__*/_jsx(\"img\",{draggable:\"false\",className:\"w-2/5 rounded-l\",src:\"https://www.instagram.com/static/images/mediaUpsell.jpg/6efc710a1d5a.jpg\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-lg sm:text-xl\",children:\"Start capturing and sharing your moments.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Get the app to share your first photo or video.\"})]})]})]})]}):/*#__PURE__*/_jsx(NotFound,{})]});};export default Profile;","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/backend/frontend/src/components/User/Profile.jsx"],"names":["useEffect","useState","PostContainer","useDispatch","useSelector","Link","useNavigate","useParams","clearErrors","followUser","getUserDetails","clearChatErrors","addNewChat","toast","BackdropLoader","metaballsMenu","postsIconFill","postsIconOutline","reelsIcon","savedIconFill","savedIconOutline","settingsIcon","taggedIcon","FOLLOW_USER_RESET","USER_DETAILS_RESET","UsersDialog","NEW_CHAT_RESET","MetaData","NotFound","Profile","dispatch","params","navigate","follow","setFollow","viewModal","setViewModal","followersModal","setFollowersModal","usersArr","setUsersArr","savedTab","setSavedTab","state","userDetails","user","error","loading","loggedInUser","followError","success","message","newChat","chatError","chat","handleFollow","_id","handleFollowersModal","followers","handleFollowingModal","following","closeModal","username","type","some","u","addToChat","friendId","users","find","id","name","avatar","posts","length","bio","website","URL","hostname","saved"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport PostContainer from './Posts/PostContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { clearErrors, followUser, getUserDetails } from '../../actions/userAction';\nimport { clearErrors as clearChatErrors, addNewChat } from '../../actions/chatAction';\nimport { toast } from 'react-toastify';\nimport BackdropLoader from '../Layouts/BackdropLoader';\nimport { metaballsMenu, postsIconFill, postsIconOutline, reelsIcon, savedIconFill, savedIconOutline, settingsIcon, taggedIcon } from './SvgIcons';\nimport { FOLLOW_USER_RESET, USER_DETAILS_RESET } from '../../constants/userConstants';\nimport UsersDialog from '../Layouts/UsersDialog';\nimport { NEW_CHAT_RESET } from '../../constants/chatConstants';\nimport MetaData from '../Layouts/MetaData';\nimport NotFound from '../Errors/NotFound';\n\nconst Profile = () => {\n\n    const dispatch = useDispatch();\n    const params = useParams();\n    const navigate = useNavigate();\n\n    const [follow, setFollow] = useState(false);\n    const [viewModal, setViewModal] = useState(false);\n    const [followersModal, setFollowersModal] = useState(false);\n    const [usersArr, setUsersArr] = useState([]);\n    const [savedTab, setSavedTab] = useState(false);\n\n    const { user, error, loading } = useSelector((state) => state.userDetails);\n    const { user: loggedInUser } = useSelector((state) => state.user);\n    const { error: followError, success, message } = useSelector((state) => state.followUser);\n    const { error: chatError, chat } = useSelector((state) => state.newChat);\n\n    const handleFollow = () => {\n        // setFollow(!follow); \n        dispatch(followUser(user._id));\n    }\n\n    const handleFollowersModal = () => {\n        setFollowersModal(true);\n        setViewModal(true)\n        setUsersArr(user?.followers);\n    }\n\n    const handleFollowingModal = () => {\n        setViewModal(true)\n        setFollowersModal(false);\n        setUsersArr(user?.following);\n    }\n\n    const closeModal = () => {\n        setViewModal(false)\n    }\n\n    useEffect(() => {\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        dispatch(getUserDetails(params.username));\n\n        if (followError) {\n            toast.error(followError);\n            dispatch(clearErrors());\n        }\n        if (success) {\n            toast.success(message)\n            dispatch({ type: FOLLOW_USER_RESET });\n        }\n\n        // return () => {\n        //     dispatch({ type: USER_DETAILS_RESET })\n        // }\n\n    }, [dispatch, error, params.username, followError, success, message]);\n\n    useEffect(() => {\n        // console.log(user?.followers?.some((id) => id === loggedInUser._id))\n        setFollow(user?.followers?.some((u) => u._id === loggedInUser._id))\n    }, [user]);\n\n    const addToChat = () => {\n        dispatch(addNewChat(user._id));\n    }\n\n    useEffect(() => {\n        if (chatError) {\n            toast.error(chatError);\n            dispatch(clearChatErrors());\n        }\n        if (chat) {\n            const friendId = chat.users?.find((id) => id !== loggedInUser._id);\n            navigate(`/direct/t/${chat._id}/${friendId}`);\n            dispatch({ type: NEW_CHAT_RESET });\n        }\n    }, [dispatch, chatError, chat, navigate]);\n\n    return (\n        <>\n            <MetaData title={`${user?.name} (@${user?.username}) â€¢ Instagram photos and videos`} />\n\n            {loading && <BackdropLoader />}\n            {user ?\n                <div className=\"mt-16 xl:w-2/3 mx-auto\">\n\n                    <div className=\"sm:flex w-full sm:py-8\">\n\n                        {/* profile picture */}\n                        <div className=\"sm:w-1/3 flex justify-center mx-auto sm:mx-0\">\n                            <img draggable=\"false\" className=\"w-40 h-40 rounded-full object-cover\" src={user.avatar} alt=\"\" />\n                        </div>\n\n                        {/* profile details */}\n                        <div className=\"flex flex-col gap-6 p-4 sm:w-2/3 sm:p-1\">\n                            <div className=\"flex items-center gap-8 sm:justify-start justify-between\">\n\n                                <h2 className=\"text-2xl sm:text-3xl font-thin\">{user.username}</h2>\n                                {(loggedInUser.username === user.username) ? (\n                                    <div className=\"flex gap-3 items-center\">\n                                        <Link to=\"/accounts/edit\" className=\"border font-medium hover:bg-gray-50 text-sm rounded px-2 py-1\">Edit Profile</Link>\n                                        <Link to=\"/accounts/edit\">{settingsIcon}</Link>\n                                    </div>\n                                ) : (\n                                    <div className=\"flex gap-3 items-center\">\n                                        {follow ? (\n                                            <>\n                                                <button onClick={addToChat} className=\"border rounded px-2.5 py-[0.3rem] text-sm font-medium hover:bg-gray-100\">Message</button>\n                                                <button onClick={handleFollow} className=\"font-medium text-sm bg-red-50 rounded py-1.5 px-3 text-red-600 hover:bg-red-100 hover:text-red-700\">Unfollow</button>\n                                            </>\n                                        ) : (\n                                            <button onClick={handleFollow} className=\"font-medium bg-primary-blue text-sm text-white hover:shadow rounded px-6 py-1.5\">Follow</button>\n                                        )}\n                                        <span className=\"sm:block hidden\">{metaballsMenu}</span>\n                                    </div>\n                                )}\n                            </div>\n\n                            <div className=\"flex justify-between items-center max-w-[21.5rem]\">\n                                <div className=\"cursor-pointer\"><span className=\"font-semibold\">{user.posts?.length}</span> posts</div>\n                                <div onClick={handleFollowersModal} className=\"cursor-pointer\"><span className=\"font-semibold\">{user.followers?.length}</span> followers</div>\n                                <div onClick={handleFollowingModal} className=\"cursor-pointer\"><span className=\"font-semibold\">{user.following?.length}</span> following</div>\n                            </div>\n\n                            {/* bio */}\n                            <div className=\"max-w-full\">\n                                <p className=\"font-medium\">{user.name}</p>\n                                <p className=\"whitespace-pre-line\">{user.bio}</p>\n                                {user?.website &&\n                                    <a href={user.website} target=\"_blank\" className=\"text-blue-900 font-medium\">{new URL(user.website).hostname}</a>\n                                }\n                            </div>\n                        </div>\n\n                    </div>\n\n                    {followersModal ?\n                        <UsersDialog title=\"Followers\" open={viewModal} onClose={closeModal} usersList={user?.followers} />\n                        :\n                        <UsersDialog title=\"Following\" open={viewModal} onClose={closeModal} usersList={user?.following} />\n                    }\n\n                    <div className=\"border-t sm:ml-8 sm:mr-14\">\n\n                        {/* tabs */}\n                        <div className=\"flex gap-12 justify-center\">\n                            <span onClick={() => setSavedTab(false)} className={`${savedTab ? 'text-gray-400' : 'border-t border-black'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`}>\n                                {savedTab ? postsIconOutline : postsIconFill} posts</span>\n                            {user._id === loggedInUser._id && (\n                                <span onClick={() => setSavedTab(true)} className={`${savedTab ? 'border-t border-black' : 'text-gray-400'} py-3 cursor-pointer flex items-center text-[13px] uppercase gap-3 tracking-[1px] font-medium`}>\n                                    {savedTab ? savedIconFill : savedIconOutline} saved</span>\n                            )}\n                            <span className=\"py-3 flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\">\n                                {reelsIcon} reels</span>\n                            <span className=\"py-3 hidden sm:flex items-center text-gray-400 text-[13px] uppercase gap-3 tracking-[1px] font-medium\">\n                                {taggedIcon} tagged</span>\n                        </div>\n\n                        {/* posts grid data */}\n                        {savedTab ?\n                            <PostContainer posts={user?.saved} id={\"saved\"} /> :\n                            user?.posts?.length > 0 ?\n                                <PostContainer posts={user?.posts} id={\"posts\"} /> :\n                                <div className=\"bg-white mt-2 mb-10 drop-shadow-sm rounded flex sm:flex-row flex-col sm:gap-0 gap-5 sm:p-0 p-4 items-center justify-between\">\n                                    <img draggable=\"false\" className=\"w-2/5 rounded-l\" src=\"https://www.instagram.com/static/images/mediaUpsell.jpg/6efc710a1d5a.jpg\" alt=\"\" />\n                                    <div className=\"mx-auto flex flex-col items-center\">\n                                        <h4 className=\"font-medium text-lg sm:text-xl\">Start capturing and sharing your moments.</h4>\n                                        <p>Get the app to share your first photo or video.</p>\n                                    </div>\n\n                                </div>\n                        }\n\n                    </div>\n\n                </div>\n                :\n                <NotFound />\n            }\n\n        </>\n    )\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}