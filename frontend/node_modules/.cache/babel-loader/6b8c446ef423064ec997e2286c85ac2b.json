{"ast":null,"code":"import _slicedToArray from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import{clearErrors,loadUser,updatePassword}from'../../../actions/userAction';import{UPDATE_PASSWORD_RESET}from'../../../constants/userConstants';import MetaData from'../../Layouts/MetaData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdatePassword=function UpdatePassword(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.profile;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),oldPassword=_useState2[0],setOldPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newPassword=_useState4[0],setNewPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var handlePasswordUpdate=function handlePasswordUpdate(e){e.preventDefault();if(newPassword.length<8){toast.warn(\"Password length must be atleast 8 characters\");return;}if(newPassword!==confirmPassword){toast.error(\"Password Doesn't Match\");return;}dispatch(updatePassword({oldPassword:oldPassword,newPassword:newPassword}));};useEffect(function(){if(error){toast.error(error);dispatch(clearErrors());}if(isUpdated){toast.success(\"Password Updated\");dispatch(loadUser());navigate(\"/\".concat(user===null||user===void 0?void 0:user.username));dispatch({type:UPDATE_PASSWORD_RESET});}},[dispatch,error,isUpdated,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Change Password \\u2022 Instagram\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordUpdate,className:\"flex flex-col gap-4 py-8 px-16 sm:w-3/4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-8 ml-24\",children:[/*#__PURE__*/_jsx(\"img\",{draggable:\"false\",className:\"w-11 h-11 rounded-full border object-cover\",src:user.avatar,alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full gap-8 text-right items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-1/4 font-semibold\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded p-1 w-3/4\",type:\"password\",placeholder:\"Current Password\",name:\"oldPassword\",value:oldPassword,onChange:function onChange(e){return setOldPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full gap-8 text-right items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-1/4 font-semibold\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded p-1 w-3/4\",type:\"password\",placeholder:\"New Password\",name:\"newPassword\",value:newPassword,onChange:function onChange(e){return setNewPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full gap-8 text-right items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-1/4 font-semibold\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded p-1 w-3/4\",type:\"password\",placeholder:\"Confirm Password\",name:\"confirmPassword\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"bg-primary-blue font-medium rounded text-white py-2 w-40 mx-auto text-sm\",children:\"Change Password\"})]})]});};export default UpdatePassword;","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/backend/frontend/src/components/User/Update/UpdatePassword.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useNavigate","toast","clearErrors","loadUser","updatePassword","UPDATE_PASSWORD_RESET","MetaData","UpdatePassword","dispatch","navigate","state","user","profile","error","isUpdated","loading","oldPassword","setOldPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","handlePasswordUpdate","e","preventDefault","length","warn","success","username","type","avatar","target","value"],"mappings":"4IAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,WAAT,CAAsBC,QAAtB,CAAgCC,cAAhC,KAAsD,6BAAtD,CACA,OAASC,qBAAT,KAAsC,kCAAtC,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,C,6IAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAEzB,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEA,iBAAiBD,WAAW,CAAC,SAACW,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAA5B,CAAQA,IAAR,cAAQA,IAAR,CACA,kBAAsCZ,WAAW,CAAC,SAACW,KAAD,QAAWA,CAAAA,KAAK,CAACE,OAAjB,EAAD,CAAjD,CAAQC,KAAR,eAAQA,KAAR,CAAeC,SAAf,eAAeA,SAAf,CAA0BC,OAA1B,eAA0BA,OAA1B,CAEA,cAAsClB,QAAQ,CAAC,EAAD,CAA9C,wCAAOmB,WAAP,eAAoBC,cAApB,eACA,eAAsCpB,QAAQ,CAAC,EAAD,CAA9C,yCAAOqB,WAAP,eAAoBC,cAApB,eACA,eAA8CtB,QAAQ,CAAC,EAAD,CAAtD,yCAAOuB,eAAP,eAAwBC,kBAAxB,eAEA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,CAAD,CAAO,CAChCA,CAAC,CAACC,cAAF,GAEA,GAAIN,WAAW,CAACO,MAAZ,CAAqB,CAAzB,CAA4B,CACxBxB,KAAK,CAACyB,IAAN,CAAW,8CAAX,EACA,OACH,CACD,GAAIR,WAAW,GAAKE,eAApB,CAAqC,CACjCnB,KAAK,CAACY,KAAN,CAAY,wBAAZ,EACA,OACH,CAEDL,QAAQ,CAACJ,cAAc,CAAC,CAAEY,WAAW,CAAXA,WAAF,CAAeE,WAAW,CAAXA,WAAf,CAAD,CAAf,CAAR,CACH,CAbD,CAeAtB,SAAS,CAAC,UAAM,CACZ,GAAIiB,KAAJ,CAAW,CACPZ,KAAK,CAACY,KAAN,CAAYA,KAAZ,EACAL,QAAQ,CAACN,WAAW,EAAZ,CAAR,CACH,CACD,GAAIY,SAAJ,CAAe,CACXb,KAAK,CAAC0B,OAAN,CAAc,kBAAd,EACAnB,QAAQ,CAACL,QAAQ,EAAT,CAAR,CACAM,QAAQ,YAAKE,IAAL,SAAKA,IAAL,iBAAKA,IAAI,CAAEiB,QAAX,EAAR,CAEApB,QAAQ,CAAC,CAAEqB,IAAI,CAAExB,qBAAR,CAAD,CAAR,CACH,CACJ,CAZQ,CAYN,CAACG,QAAD,CAAWK,KAAX,CAAkBC,SAAlB,CAA6BL,QAA7B,CAZM,CAAT,CAcA,mBACI,wCACI,KAAC,QAAD,EAAU,KAAK,CAAC,kCAAhB,EADJ,cAGI,cAAM,QAAQ,CAAEa,oBAAhB,CAAsC,SAAS,CAAC,yCAAhD,wBACI,aAAK,SAAS,CAAC,+BAAf,wBACI,YAAK,SAAS,CAAC,OAAf,CAAuB,SAAS,CAAC,4CAAjC,CAA8E,GAAG,CAAEX,IAAI,CAACmB,MAAxF,CAAgG,GAAG,CAAC,EAApG,EADJ,cAEI,aAAM,SAAS,CAAC,UAAhB,UAA4BnB,IAAI,CAACiB,QAAjC,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,2CAAf,wBACI,aAAM,SAAS,CAAC,qBAAhB,8BADJ,cAEI,cACI,SAAS,CAAC,0BADd,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,kBAHhB,CAII,IAAI,CAAC,aAJT,CAKI,KAAK,CAAEZ,WALX,CAMI,QAAQ,CAAE,kBAACO,CAAD,QAAON,CAAAA,cAAc,CAACM,CAAC,CAACQ,MAAF,CAASC,KAAV,CAArB,EANd,CAOI,QAAQ,KAPZ,EAFJ,GALJ,cAiBI,aAAK,SAAS,CAAC,2CAAf,wBACI,aAAM,SAAS,CAAC,qBAAhB,0BADJ,cAEI,cACI,SAAS,CAAC,0BADd,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,cAHhB,CAII,IAAI,CAAC,aAJT,CAKI,KAAK,CAAEd,WALX,CAMI,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,CAAAA,cAAc,CAACI,CAAC,CAACQ,MAAF,CAASC,KAAV,CAArB,EANd,CAOI,QAAQ,KAPZ,EAFJ,GAjBJ,cA6BI,aAAK,SAAS,CAAC,2CAAf,wBACI,aAAM,SAAS,CAAC,qBAAhB,kCADJ,cAEI,cACI,SAAS,CAAC,0BADd,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,kBAHhB,CAII,IAAI,CAAC,iBAJT,CAKI,KAAK,CAAEZ,eALX,CAMI,QAAQ,CAAE,kBAACG,CAAD,QAAOF,CAAAA,kBAAkB,CAACE,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAzB,EANd,CAOI,QAAQ,KAPZ,EAFJ,GA7BJ,cAyCI,eAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,CAAEjB,OAAhC,CAAyC,SAAS,CAAC,0EAAnD,6BAzCJ,GAHJ,GADJ,CAiDH,CA1FD,CA4FA,cAAeR,CAAAA,cAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { clearErrors, loadUser, updatePassword } from '../../../actions/userAction';\nimport { UPDATE_PASSWORD_RESET } from '../../../constants/userConstants';\nimport MetaData from '../../Layouts/MetaData';\n\nconst UpdatePassword = () => {\n\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    const { user } = useSelector((state) => state.user);\n    const { error, isUpdated, loading } = useSelector((state) => state.profile);\n\n    const [oldPassword, setOldPassword] = useState(\"\");\n    const [newPassword, setNewPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n    const handlePasswordUpdate = (e) => {\n        e.preventDefault();\n\n        if (newPassword.length < 8) {\n            toast.warn(\"Password length must be atleast 8 characters\");\n            return;\n        }\n        if (newPassword !== confirmPassword) {\n            toast.error(\"Password Doesn't Match\");\n            return;\n        }\n\n        dispatch(updatePassword({ oldPassword, newPassword }));\n    }\n\n    useEffect(() => {\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        if (isUpdated) {\n            toast.success(\"Password Updated\");\n            dispatch(loadUser());\n            navigate(`/${user?.username}`);\n\n            dispatch({ type: UPDATE_PASSWORD_RESET });\n        }\n    }, [dispatch, error, isUpdated, navigate]);\n\n    return (\n        <>\n            <MetaData title=\"Change Password â€¢ Instagram\" />\n\n            <form onSubmit={handlePasswordUpdate} className=\"flex flex-col gap-4 py-8 px-16 sm:w-3/4\">\n                <div className=\"flex items-center gap-8 ml-24\">\n                    <img draggable=\"false\" className=\"w-11 h-11 rounded-full border object-cover\" src={user.avatar} alt=\"\" />\n                    <span className=\"text-2xl\">{user.username}</span>\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Current Password</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"password\"\n                        placeholder=\"Current Password\"\n                        name=\"oldPassword\"\n                        value={oldPassword}\n                        onChange={(e) => setOldPassword(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">New Password</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"password\"\n                        placeholder=\"New Password\"\n                        name=\"newPassword\"\n                        value={newPassword}\n                        onChange={(e) => setNewPassword(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Confirm New Password</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"password\"\n                        placeholder=\"Confirm Password\"\n                        name=\"confirmPassword\"\n                        value={confirmPassword}\n                        onChange={(e) => setConfirmPassword(e.target.value)}\n                        required\n                    />\n                </div>\n                <button type=\"submit\" disabled={loading} className=\"bg-primary-blue font-medium rounded text-white py-2 w-40 mx-auto text-sm\">Change Password</button>\n            </form>\n        </>\n    )\n}\n\nexport default UpdatePassword"]},"metadata":{},"sourceType":"module"}