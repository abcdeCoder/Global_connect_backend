{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder (4)\\\\instagram-mern-main\\\\frontend\\\\src\\\\components\\\\User\\\\Update\\\\UpdateProfile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { clearErrors, loadUser, updateProfile } from '../../../actions/userAction';\nimport profile from '../../../assests/images/hero.png';\nimport { UPDATE_PROFILE_RESET } from '../../../constants/userConstants';\nimport MetaData from '../../Layouts/MetaData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UpdateProfile = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const avatarInput = useRef(null);\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    error,\n    isUpdated,\n    loading\n  } = useSelector(state => state.profile);\n  const [name, setName] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [website, setWebsite] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [oldAvatar, setOldAvatar] = useState(\"\");\n  const [avatar, setAvatar] = useState(\"\");\n  const [avatarPreview, setAvatarPreview] = useState(\"\");\n\n  const handleUpdate = e => {\n    e.preventDefault();\n    const userCheck = /^[a-z0-9_.-]{6,25}$/igm;\n\n    if (!userCheck.test(username)) {\n      toast.error(\"Invalid Username\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.set(\"name\", name);\n    formData.set(\"username\", username);\n    formData.set(\"website\", website);\n    formData.set(\"bio\", bio);\n    formData.set(\"email\", email);\n    formData.set(\"avatar\", avatar);\n    dispatch(updateProfile(formData));\n  };\n\n  const handleAvatarChange = e => {\n    const reader = new FileReader();\n    setAvatar(\"\");\n\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setAvatarPreview(reader.result);\n      }\n    };\n\n    reader.readAsDataURL(e.target.files[0]);\n    setAvatar(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setUsername(user.username);\n      setWebsite(user.website);\n      setBio(user.bio);\n      setEmail(user.email);\n      setOldAvatar(user.avatar);\n    }\n\n    if (error) {\n      toast.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      toast.success(\"Profile Updated\");\n      dispatch(loadUser());\n      navigate(`/${username}`);\n      dispatch({\n        type: UPDATE_PROFILE_RESET\n      });\n    }\n  }, [dispatch, user, error, isUpdated]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: \"Edit Profile \\u2022 Instagram\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleUpdate,\n      encType: \"multipart/form-data\",\n      className: \"flex flex-col gap-4 py-4 px-4 sm:py-10 sm:px-24 sm:w-3/4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-8 ml-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-11 h-11\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            draggable: \"false\",\n            className: \"w-full h-full rounded-full border object-cover\",\n            src: avatarPreview ? avatarPreview : oldAvatar,\n            alt: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            onClick: e => avatarInput.current.click(),\n            className: \"text-sm font-medium text-primary-blue cursor-pointer\",\n            children: \"Change Profile Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            name: \"avatar\",\n            ref: avatarInput,\n            onChange: handleAvatarChange,\n            className: \"hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full gap-8 text-right items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1/4 font-semibold\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded p-1 w-3/4\",\n          type: \"text\",\n          placeholder: \"Name\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full gap-8 text-right items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1/4 font-semibold\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded p-1 w-3/4\",\n          type: \"text\",\n          placeholder: \"Username\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full gap-8 text-right items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1/4 font-semibold\",\n          children: \"Website\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded p-1 w-3/4\",\n          type: \"url\",\n          placeholder: \"Website\",\n          value: website,\n          onChange: e => setWebsite(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full gap-8 text-right items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1/4 font-semibold\",\n          children: \"Bio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"border rounded outline-none resize-none p-1 w-3/4\",\n          name: \"bio\",\n          placeholder: \"Bio\",\n          rows: \"3\",\n          value: bio,\n          onChange: e => setBio(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full gap-8 text-right items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-1/4 font-semibold\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded p-1 w-3/4\",\n          type: \"email\",\n          placeholder: \"Email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"bg-primary-blue font-medium rounded text-white py-2 w-40 mx-auto text-sm\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UpdateProfile, \"1ozzUQLry2HJ60sVI+KnicT8Esc=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector];\n});\n\n_c = UpdateProfile;\nexport default UpdateProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateProfile\");","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/frontend/src/components/User/Update/UpdateProfile.jsx"],"names":["React","useEffect","useRef","useState","useDispatch","useSelector","useNavigate","toast","clearErrors","loadUser","updateProfile","profile","UPDATE_PROFILE_RESET","MetaData","UpdateProfile","dispatch","navigate","avatarInput","user","state","error","isUpdated","loading","name","setName","username","setUsername","website","setWebsite","bio","setBio","email","setEmail","oldAvatar","setOldAvatar","avatar","setAvatar","avatarPreview","setAvatarPreview","handleUpdate","e","preventDefault","userCheck","test","formData","FormData","set","handleAvatarChange","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","success","type","current","click","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { clearErrors, loadUser, updateProfile } from '../../../actions/userAction';\nimport profile from '../../../assests/images/hero.png';\nimport { UPDATE_PROFILE_RESET } from '../../../constants/userConstants';\nimport MetaData from '../../Layouts/MetaData';\n\nconst UpdateProfile = () => {\n\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const avatarInput = useRef(null);\n\n    const { user } = useSelector((state) => state.user);\n    const { error, isUpdated, loading } = useSelector((state) => state.profile);\n\n    const [name, setName] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const [website, setWebsite] = useState(\"\");\n    const [bio, setBio] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [oldAvatar, setOldAvatar] = useState(\"\");\n    const [avatar, setAvatar] = useState(\"\");\n    const [avatarPreview, setAvatarPreview] = useState(\"\");\n\n    const handleUpdate = (e) => {\n        e.preventDefault();\n\n        const userCheck = /^[a-z0-9_.-]{6,25}$/igm;\n\n        if (!userCheck.test(username)) {\n            toast.error(\"Invalid Username\");\n            return;\n        }\n\n        const formData = new FormData();\n        formData.set(\"name\", name);\n        formData.set(\"username\", username);\n        formData.set(\"website\", website);\n        formData.set(\"bio\", bio);\n        formData.set(\"email\", email);\n        formData.set(\"avatar\", avatar);\n\n        dispatch(updateProfile(formData));\n    }\n\n    const handleAvatarChange = (e) => {\n        const reader = new FileReader();\n        setAvatar(\"\");\n        reader.onload = () => {\n            if (reader.readyState === 2) {\n                setAvatarPreview(reader.result);\n            }\n        };\n        reader.readAsDataURL(e.target.files[0]);\n        setAvatar(e.target.files[0]);\n    }\n\n    useEffect(() => {\n        if (user) {\n            setName(user.name);\n            setUsername(user.username);\n            setWebsite(user.website);\n            setBio(user.bio);\n            setEmail(user.email);\n            setOldAvatar(user.avatar);\n        }\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        if (isUpdated) {\n            toast.success(\"Profile Updated\");\n            dispatch(loadUser());\n            navigate(`/${username}`);\n\n            dispatch({ type: UPDATE_PROFILE_RESET });\n        }\n    }, [dispatch, user, error, isUpdated]);\n\n    return (\n        <>\n            <MetaData title=\"Edit Profile • Instagram\" />\n\n            <form\n                onSubmit={handleUpdate}\n                encType=\"multipart/form-data\"\n                className=\"flex flex-col gap-4 py-4 px-4 sm:py-10 sm:px-24 sm:w-3/4\"\n            >\n                <div className=\"flex items-center gap-8 ml-20\">\n                    <div className=\"w-11 h-11\">\n                        <img draggable=\"false\" className=\"w-full h-full rounded-full border object-cover\" src={avatarPreview ? avatarPreview : oldAvatar} alt=\"avatar\" />\n                    </div>\n                    <div className=\"flex flex-col gap-0\">\n                        <span className=\"text-xl\">{username}</span>\n                        <label onClick={(e) => avatarInput.current.click()} className=\"text-sm font-medium text-primary-blue cursor-pointer\">Change Profile Photo</label>\n                        <input\n                            type=\"file\"\n                            accept=\"image/*\"\n                            name=\"avatar\"\n                            ref={avatarInput}\n                            onChange={handleAvatarChange}\n                            className=\"hidden\" />\n                    </div>\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Name</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"text\"\n                        placeholder=\"Name\"\n                        value={name}\n                        onChange={(e) => setName(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Username</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"text\"\n                        placeholder=\"Username\"\n                        value={username}\n                        onChange={(e) => setUsername(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Website</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"url\"\n                        placeholder=\"Website\"\n                        value={website}\n                        onChange={(e) => setWebsite(e.target.value)}\n                        required\n                    />\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-start\">\n                    <span className=\"w-1/4 font-semibold\">Bio</span>\n                    <textarea\n                        className=\"border rounded outline-none resize-none p-1 w-3/4\"\n                        name=\"bio\"\n                        placeholder=\"Bio\"\n                        rows=\"3\"\n                        value={bio}\n                        onChange={(e) => setBio(e.target.value)}\n                        required\n                    >\n                    </textarea>\n                </div>\n                <div className=\"flex w-full gap-8 text-right items-center\">\n                    <span className=\"w-1/4 font-semibold\">Email</span>\n                    <input\n                        className=\"border rounded p-1 w-3/4\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        required\n                    />\n                </div>\n                <button type=\"submit\" disabled={loading} className=\"bg-primary-blue font-medium rounded text-white py-2 w-40 mx-auto text-sm\">Submit</button>\n            </form>\n        </>\n    )\n}\n\nexport default UpdateProfile"]},"metadata":{},"sourceType":"module"}