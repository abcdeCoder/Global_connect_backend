{"ast":null,"code":"import _objectSpread from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\New folder (4)\\\\instagram-mern-main\\\\backend\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{ClickAwayListener}from'@mui/material';import axios from'axios';import{useEffect,useState}from'react';import{searchIcon}from'../SvgIcons';import SearchUserItem from'./SearchUserItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchBox=function SearchBox(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),searchResult=_useState8[0],setSearchResult=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),searching=_useState10[0],setSearching=_useState10[1];var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(term){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.get(\"/api/v1/users?keyword=\".concat(term));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setUsers(data.users);setLoading(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchUsers(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(searchTerm.trim().length>0){fetchUsers(searchTerm);}return function(){setUsers([]);};},[searchTerm]);var handleClickAway=function handleClickAway(){setSearchTerm(\"\");setSearchResult(false);setSearching(false);};var handleFocus=function handleFocus(){setSearchResult(true);setSearching(true);};return/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClickAway,children:/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:flex items-center gap-3 pl-4 ml-36 w-64 py-2 bg-[#efefef] rounded-lg relative\",children:[!searching&&searchIcon,/*#__PURE__*/_jsx(\"input\",{className:\"bg-transparent text-sm border-none outline-none flex-1 pr-3\",type:\"search\",value:searchTerm,onFocus:handleFocus,onChange:function onChange(e){return setSearchTerm(e.target.value);},placeholder:\"Search\"}),searchResult&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-1/2 -bottom-5 rotate-45 h-4 w-4 drop-shadow-lg bg-white rounded-sm border-l border-t\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(loading?'justify-center items-center':users.length<1&&'justify-center items-center',\" absolute overflow-y-auto overflow-x-hidden flex flex-col top-[49px] w-[23rem] -left-11 h-80 bg-white drop-shadow-xl rounded\"),children:loading?/*#__PURE__*/_jsxs(\"svg\",{\"aria-label\":\"Loading...\",className:\"h-6 w-6 my-2 animate-spin\",viewBox:\"0 0 100 100\",children:[/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0\",rx:\"3\",ry:\"3\",transform:\"rotate(-90 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.08333333333333333\",rx:\"3\",ry:\"3\",transform:\"rotate(-60 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.16666666666666666\",rx:\"3\",ry:\"3\",transform:\"rotate(-30 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.25\",rx:\"3\",ry:\"3\",transform:\"rotate(0 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.3333333333333333\",rx:\"3\",ry:\"3\",transform:\"rotate(30 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.4166666666666667\",rx:\"3\",ry:\"3\",transform:\"rotate(60 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.5\",rx:\"3\",ry:\"3\",transform:\"rotate(90 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.5833333333333334\",rx:\"3\",ry:\"3\",transform:\"rotate(120 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.6666666666666666\",rx:\"3\",ry:\"3\",transform:\"rotate(150 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.75\",rx:\"3\",ry:\"3\",transform:\"rotate(180 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.8333333333333334\",rx:\"3\",ry:\"3\",transform:\"rotate(210 50 50)\",width:\"25\",x:\"72\",y:\"47\"}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#555555\",height:\"6\",opacity:\"0.9166666666666666\",rx:\"3\",ry:\"3\",transform:\"rotate(240 50 50)\",width:\"25\",x:\"72\",y:\"47\"})]}):users.length>0?users.map(function(user){return/*#__PURE__*/_createElement(SearchUserItem,_objectSpread(_objectSpread({},user),{},{key:user._id}));}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-sm\",children:\"No results found.\"})})]})]})});};export default SearchBox;","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/backend/frontend/src/components/Navbar/SearchBar/SearchBox.jsx"],"names":["ClickAwayListener","axios","useEffect","useState","searchIcon","SearchUserItem","SearchBox","users","setUsers","searchTerm","setSearchTerm","loading","setLoading","searchResult","setSearchResult","searching","setSearching","fetchUsers","term","get","data","trim","length","handleClickAway","handleFocus","e","target","value","map","user","_id"],"mappings":"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","sourcesContent":["import { ClickAwayListener } from '@mui/material';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { searchIcon } from '../SvgIcons';\nimport SearchUserItem from './SearchUserItem';\n\nconst SearchBox = () => {\n\n    const [users, setUsers] = useState([]);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [searchResult, setSearchResult] = useState(false);\n    const [searching, setSearching] = useState(false);\n\n    const fetchUsers = async (term) => {\n        setLoading(true);\n        const { data } = await axios.get(`/api/v1/users?keyword=${term}`);\n        setUsers(data.users);\n        setLoading(false);\n    }\n\n    useEffect(() => {\n        if (searchTerm.trim().length > 0) {\n            fetchUsers(searchTerm);\n        }\n\n        return () => {\n            setUsers([])\n        }\n    }, [searchTerm]);\n\n    const handleClickAway = () => {\n        setSearchTerm(\"\");\n        setSearchResult(false)\n        setSearching(false)\n    }\n\n    const handleFocus = () => {\n        setSearchResult(true)\n        setSearching(true)\n    }\n\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <div className=\"hidden sm:flex items-center gap-3 pl-4 ml-36 w-64 py-2 bg-[#efefef] rounded-lg relative\">\n                {!searching && searchIcon}\n                <input\n                    className=\"bg-transparent text-sm border-none outline-none flex-1 pr-3\"\n                    type=\"search\"\n                    value={searchTerm}\n                    onFocus={handleFocus}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    placeholder=\"Search\"\n                />\n                {searchResult &&\n                    <>\n                        <div className=\"absolute right-1/2 -bottom-5 rotate-45 h-4 w-4 drop-shadow-lg bg-white rounded-sm border-l border-t\"></div>\n\n                        <div className={`${loading ? 'justify-center items-center' : users.length < 1 && 'justify-center items-center'} absolute overflow-y-auto overflow-x-hidden flex flex-col top-[49px] w-[23rem] -left-11 h-80 bg-white drop-shadow-xl rounded`}>\n\n                            {loading ?\n                                <svg aria-label=\"Loading...\" className=\"h-6 w-6 my-2 animate-spin\" viewBox=\"0 0 100 100\"><rect fill=\"#555555\" height=\"6\" opacity=\"0\" rx=\"3\" ry=\"3\" transform=\"rotate(-90 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.08333333333333333\" rx=\"3\" ry=\"3\" transform=\"rotate(-60 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.16666666666666666\" rx=\"3\" ry=\"3\" transform=\"rotate(-30 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.25\" rx=\"3\" ry=\"3\" transform=\"rotate(0 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.3333333333333333\" rx=\"3\" ry=\"3\" transform=\"rotate(30 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.4166666666666667\" rx=\"3\" ry=\"3\" transform=\"rotate(60 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.5\" rx=\"3\" ry=\"3\" transform=\"rotate(90 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.5833333333333334\" rx=\"3\" ry=\"3\" transform=\"rotate(120 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.6666666666666666\" rx=\"3\" ry=\"3\" transform=\"rotate(150 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.75\" rx=\"3\" ry=\"3\" transform=\"rotate(180 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.8333333333333334\" rx=\"3\" ry=\"3\" transform=\"rotate(210 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect><rect fill=\"#555555\" height=\"6\" opacity=\"0.9166666666666666\" rx=\"3\" ry=\"3\" transform=\"rotate(240 50 50)\" width=\"25\" x=\"72\" y=\"47\"></rect></svg>\n                                : users.length > 0 ?\n                                    users.map((user) => (\n                                        <SearchUserItem {...user} key={user._id} />\n                                    ))\n                                    :\n                                    <span className=\"text-gray-400 text-sm\">No results found.</span>\n                            }\n\n                        </div>\n                    </>\n                }\n            </div>\n        </ClickAwayListener>\n    )\n}\n\nexport default SearchBox"]},"metadata":{},"sourceType":"module"}