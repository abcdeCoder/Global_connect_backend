{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder (4)\\\\instagram-mern-main\\\\frontend\\\\src\\\\components\\\\User\\\\Posts\\\\PostItem.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ModeCommentIcon from '@mui/icons-material/ModeComment';\nimport { Dialog } from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { commentIcon, emojiIcon, likeIconOutline, saveIconFill, saveIconOutline, shareIcon } from '../../Home/SvgIcons';\nimport { likeFill } from '../../Navbar/SvgIcons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addComment, clearErrors, deletePost, likePost, savePost } from '../../../actions/postAction';\nimport { Picker } from 'emoji-mart';\nimport { metaballsMenu } from '../SvgIcons';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PostItem = _ref => {\n  _s();\n\n  let {\n    _id,\n    caption,\n    likes,\n    comments,\n    image,\n    postedBy,\n    savedBy,\n    createdAt\n  } = _ref;\n  const dispatch = useDispatch();\n  const commentInput = useRef(null);\n  const [open, setOpen] = useState(false);\n  const [liked, setLiked] = useState(false);\n  const [saved, setSaved] = useState(false);\n  const [comment, setComment] = useState(\"\");\n  const [showEmojis, setShowEmojis] = useState(false);\n  const [deleteModal, setDeleteModal] = useState(false);\n  const [likeEffect, setLikeEffect] = useState(false);\n  const {\n    user\n  } = useSelector(state => state.user);\n\n  const handleLike = () => {\n    setLiked(!liked);\n    dispatch(likePost(_id));\n  };\n\n  const handleComment = e => {\n    e.preventDefault();\n    dispatch(addComment(_id, comment));\n    setComment(\"\");\n  };\n\n  const handleSave = () => {\n    setSaved(!saved);\n    dispatch(savePost(_id));\n  };\n\n  const handleDeletePost = () => {\n    dispatch(deletePost(_id));\n    setDeleteModal(false);\n  };\n\n  useEffect(() => {\n    setLiked(likes.some(id => id === user._id));\n  }, [likes]);\n  useEffect(() => {\n    setSaved(savedBy.some(id => id === user._id));\n  }, [savedBy]);\n\n  const closeDeleteModal = () => {\n    setDeleteModal(false);\n  };\n\n  const setLike = () => {\n    setLikeEffect(true);\n    setTimeout(() => {\n      setLikeEffect(false);\n    }, 500);\n\n    if (liked) {\n      return;\n    }\n\n    handleLike();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setOpen(true),\n      className: \"group w-full h-32 sm:h-72 max-h-72 flex justify-center items-center bg-gray-100 hover:bg-black cursor-pointer relative z-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        draggable: \"false\",\n        loading: \"lazy\",\n        className: \"hover:opacity-75 group-hover:opacity-75 cursor-pointer object-cover h-full w-full\",\n        src: image,\n        alt: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hidden group-hover:flex text-white absolute pointer-events-none gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(FavoriteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 27\n          }, this), \" \", likes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(ModeCommentIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 27\n          }, this), \" \", comments.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      maxWidth: \"xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex sm:flex-row flex-col max-w-7xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex items-center justify-center bg-black sm:h-[90vh] w-full\",\n          onDoubleClick: setLike,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            draggable: \"false\",\n            className: \"object-contain h-full w-full\",\n            src: image,\n            alt: \"post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), likeEffect && /*#__PURE__*/_jsxDEV(\"img\", {\n            draggable: \"false\",\n            height: \"80px\",\n            className: \"likeEffect\",\n            alt: \"heart\",\n            src: \"https://img.icons8.com/ios-filled/2x/ffffff/like.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col justify-between border w-full max-w-xl rounded bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between px-3 py-2 border-b items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: `/${postedBy.username}`,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  draggable: \"false\",\n                  className: \"w-10 h-10 rounded-full object-cover\",\n                  src: postedBy.avatar,\n                  alt: \"avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 68\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/${postedBy.username}`,\n                className: \"text-black text-sm font-semibold hover:underline\",\n                children: postedBy.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => setDeleteModal(true),\n              className: \"cursor-pointer\",\n              children: metaballsMenu\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n            open: deleteModal,\n            onClose: closeDeleteModal,\n            maxWidth: \"xl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center w-80\",\n              children: [postedBy._id === user._id && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleDeletePost,\n                className: \"text-red-600 font-medium border-b py-2.5 w-full hover:bg-red-50\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: closeDeleteModal,\n                className: \"py-2.5 w-full hover:bg-gray-50\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 w-full flex-1 max-h-[63vh] overscroll-x-hidden overflow-y-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: `/${postedBy.username}`,\n                className: \"w-12\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  draggable: \"false\",\n                  className: \"w-9 h-9 rounded-full object-cover\",\n                  src: postedBy.avatar,\n                  alt: \"avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 85\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/${postedBy.username}`,\n                className: \"text-sm font-semibold hover:underline mr-2\",\n                children: postedBy.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm whitespace-pre-line ml-12 -mt-4 mb-3.5\",\n              children: caption\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), comments.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-1 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: `/${c.user}`,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  draggable: \"false\",\n                  className: \"w-9 h-9 rounded-full object-cover mr-2.5\",\n                  src: c.user.avatar,\n                  alt: \"avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/${c.user}`,\n                className: \"text-sm font-semibold hover:underline\",\n                children: c.user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm whitespace-pre-line\",\n                children: c.comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 37\n              }, this)]\n            }, c._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col px-3 space-y-1 border-b border-t pb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between py-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleLike,\n                    children: liked ? likeFill : likeIconOutline\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => commentInput.current.focus(),\n                    children: commentIcon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 41\n                  }, this), shareIcon]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSave,\n                  children: saved ? saveIconFill : saveIconOutline\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"w-full font-semibold text-sm\",\n                children: [likes.length, \" likes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500\",\n                children: moment(createdAt).fromNow()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleComment,\n              className: \"flex items-center justify-between p-3 w-full space-x-3 relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => setShowEmojis(!showEmojis),\n                className: \"cursor-pointer\",\n                children: emojiIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this), showEmojis && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-12 -left-20\",\n                children: /*#__PURE__*/_jsxDEV(Picker, {\n                  set: \"google\",\n                  onSelect: e => setComment(comment + e.native),\n                  title: \"Emojis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"flex-auto text-sm outline-none border-none bg-transparent\",\n                type: \"text\",\n                value: comment,\n                ref: commentInput,\n                required: true,\n                onClick: () => setShowEmojis(false),\n                onChange: e => setComment(e.target.value),\n                placeholder: \"Add a comment...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: `${comment.trim().length < 1 ? 'text-blue-300' : 'text-primary-blue'} text-sm font-semibold`,\n                disabled: comment.trim().length < 1,\n                children: \"Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PostItem, \"eLVwS7RPoIWEyADHiboWvflILwc=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = PostItem;\nexport default PostItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostItem\");","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/frontend/src/components/User/Posts/PostItem.jsx"],"names":["useEffect","useRef","useState","FavoriteIcon","ModeCommentIcon","Dialog","Link","commentIcon","emojiIcon","likeIconOutline","saveIconFill","saveIconOutline","shareIcon","likeFill","useDispatch","useSelector","addComment","clearErrors","deletePost","likePost","savePost","Picker","metaballsMenu","moment","PostItem","_id","caption","likes","comments","image","postedBy","savedBy","createdAt","dispatch","commentInput","open","setOpen","liked","setLiked","saved","setSaved","comment","setComment","showEmojis","setShowEmojis","deleteModal","setDeleteModal","likeEffect","setLikeEffect","user","state","handleLike","handleComment","e","preventDefault","handleSave","handleDeletePost","some","id","closeDeleteModal","setLike","setTimeout","length","username","avatar","map","c","current","focus","fromNow","native","target","value","trim"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react'\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ModeCommentIcon from '@mui/icons-material/ModeComment';\nimport { Dialog } from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { commentIcon, emojiIcon, likeIconOutline, saveIconFill, saveIconOutline, shareIcon } from '../../Home/SvgIcons';\nimport { likeFill } from '../../Navbar/SvgIcons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addComment, clearErrors, deletePost, likePost, savePost } from '../../../actions/postAction';\nimport { Picker } from 'emoji-mart';\nimport { metaballsMenu } from '../SvgIcons';\nimport moment from 'moment';\n\nconst PostItem = ({ _id, caption, likes, comments, image, postedBy, savedBy, createdAt }) => {\n\n    const dispatch = useDispatch();\n    const commentInput = useRef(null);\n\n    const [open, setOpen] = useState(false);\n    const [liked, setLiked] = useState(false);\n    const [saved, setSaved] = useState(false);\n    const [comment, setComment] = useState(\"\");\n    const [showEmojis, setShowEmojis] = useState(false);\n    const [deleteModal, setDeleteModal] = useState(false);\n\n    const [likeEffect, setLikeEffect] = useState(false);\n\n    const { user } = useSelector((state) => state.user);\n\n    const handleLike = () => {\n        setLiked(!liked);\n        dispatch(likePost(_id));\n    }\n\n    const handleComment = (e) => {\n        e.preventDefault();\n        dispatch(addComment(_id, comment));\n        setComment(\"\");\n    }\n\n    const handleSave = () => {\n        setSaved(!saved);\n        dispatch(savePost(_id));\n    }\n\n    const handleDeletePost = () => {\n        dispatch(deletePost(_id));\n        setDeleteModal(false)\n    }\n\n    useEffect(() => {\n        setLiked(likes.some((id) => id === user._id))\n    }, [likes]);\n\n    useEffect(() => {\n        setSaved(savedBy.some((id) => id === user._id))\n    }, [savedBy]);\n\n    const closeDeleteModal = () => {\n        setDeleteModal(false)\n    }\n\n    const setLike = () => {\n        setLikeEffect(true)\n        setTimeout(() => {\n            setLikeEffect(false)\n        }, 500)\n        if (liked) {\n            return;\n        }\n        handleLike();\n    }\n\n    return (\n        <>\n            <div onClick={() => setOpen(true)} className=\"group w-full h-32 sm:h-72 max-h-72 flex justify-center items-center bg-gray-100 hover:bg-black cursor-pointer relative z-0\">\n                <img draggable=\"false\" loading=\"lazy\" className=\"hover:opacity-75 group-hover:opacity-75 cursor-pointer object-cover h-full w-full\" src={image} alt=\"Post\" />\n                <div className=\"hidden group-hover:flex text-white absolute pointer-events-none gap-4\">\n                    <span><FavoriteIcon /> {likes.length}</span>\n                    <span><ModeCommentIcon /> {comments.length}</span>\n                </div>\n            </div>\n\n            <Dialog open={open} onClose={() => setOpen(false)} maxWidth='xl'>\n                <div className=\"flex sm:flex-row flex-col max-w-7xl\">\n\n                    <div className=\"relative flex items-center justify-center bg-black sm:h-[90vh] w-full\" onDoubleClick={setLike}>\n                        <img draggable=\"false\" className=\"object-contain h-full w-full\" src={image} alt=\"post\" />\n                        {likeEffect &&\n                            <img draggable=\"false\" height=\"80px\" className=\"likeEffect\" alt=\"heart\" src=\"https://img.icons8.com/ios-filled/2x/ffffff/like.png\" />\n                        }\n                    </div>\n\n                    <div className=\"flex flex-col justify-between border w-full max-w-xl rounded bg-white\">\n\n                        {/* id with menu icon */}\n                        <div className=\"flex justify-between px-3 py-2 border-b items-center\">\n                            {/* icon with name */}\n                            <div className=\"flex space-x-3 items-center\">\n                                <Link to={`/${postedBy.username}`}><img draggable=\"false\" className=\"w-10 h-10 rounded-full object-cover\" src={postedBy.avatar} alt=\"avatar\" /></Link>\n                                <Link to={`/${postedBy.username}`} className=\"text-black text-sm font-semibold hover:underline\">{postedBy.username}</Link>\n                            </div>\n                            <span onClick={() => setDeleteModal(true)} className=\"cursor-pointer\">{metaballsMenu}</span>\n                        </div>\n\n                        <Dialog open={deleteModal} onClose={closeDeleteModal} maxWidth='xl'>\n                            <div className=\"flex flex-col items-center w-80\">\n                                {postedBy._id === user._id &&\n                                    <button onClick={handleDeletePost} className=\"text-red-600 font-medium border-b py-2.5 w-full hover:bg-red-50\">Delete</button>\n                                }\n                                <button onClick={closeDeleteModal} className=\"py-2.5 w-full hover:bg-gray-50\">Cancel</button>\n                            </div>\n                        </Dialog>\n\n                        {/* comments */}\n                        <div className=\"p-4 w-full flex-1 max-h-[63vh] overscroll-x-hidden overflow-y-auto\">\n\n                            <div className=\"flex items-start\">\n                                <Link to={`/${postedBy.username}`} className=\"w-12\"><img draggable=\"false\" className=\"w-9 h-9 rounded-full object-cover\" src={postedBy.avatar} alt=\"avatar\" /></Link>\n                                <Link to={`/${postedBy.username}`} className=\"text-sm font-semibold hover:underline mr-2\">{postedBy.username}</Link>\n                            </div>\n                            <p className=\"text-sm whitespace-pre-line ml-12 -mt-4 mb-3.5\">{caption}</p>\n\n                            {comments.map((c) => (\n                                <div className=\"flex items-start space-x-1 mb-3\" key={c._id}>\n                                    <Link to={`/${c.user}`}><img draggable=\"false\" className=\"w-9 h-9 rounded-full object-cover mr-2.5\" src={c.user.avatar} alt=\"avatar\" /></Link>\n                                    <Link to={`/${c.user}`} className=\"text-sm font-semibold hover:underline\">{c.user.username}</Link>\n                                    <p className=\"text-sm whitespace-pre-line\">{c.comment}</p>\n                                </div>\n                            ))}\n                        </div>\n\n                        <div className=\"\">\n                            {/* like comment container */}\n                            <div className=\"flex flex-col px-3 space-y-1 border-b border-t pb-2\">\n                                {/* icons container */}\n                                <div className=\"flex items-center justify-between py-2\">\n                                    {/* left icons container */}\n                                    <div className=\"flex space-x-4\">\n                                        <button onClick={handleLike}>{liked ? likeFill : likeIconOutline}</button>\n                                        <button onClick={() => commentInput.current.focus()}>{commentIcon}</button>\n                                        {shareIcon}\n                                    </div>\n                                    <button onClick={handleSave}>{saved ? saveIconFill : saveIconOutline}</button>\n                                </div>\n\n                                {/* likes  */}\n                                <span className=\"w-full font-semibold text-sm\">{likes.length} likes</span>\n\n                                {/* time */}\n                                <span className=\"text-xs text-gray-500\">{moment(createdAt).fromNow()}</span>\n                            </div>\n\n                            {/* comment input */}\n                            <form onSubmit={handleComment} className=\"flex items-center justify-between p-3 w-full space-x-3 relative\">\n                                <span onClick={() => setShowEmojis(!showEmojis)} className=\"cursor-pointer\">{emojiIcon}</span>\n\n                                {showEmojis && (\n                                    <div className=\"absolute bottom-12 -left-20\">\n                                        <Picker\n                                            set=\"google\"\n                                            onSelect={(e) => setComment(comment + e.native)}\n                                            title=\"Emojis\"\n                                        />\n                                    </div>\n                                )}\n\n                                <input\n                                    className=\"flex-auto text-sm outline-none border-none bg-transparent\"\n                                    type=\"text\"\n                                    value={comment}\n                                    ref={commentInput}\n                                    required\n                                    onClick={() => setShowEmojis(false)}\n                                    onChange={(e) => setComment(e.target.value)}\n                                    placeholder=\"Add a comment...\" />\n                                <button type=\"submit\" className={`${comment.trim().length < 1 ? 'text-blue-300' : 'text-primary-blue'} text-sm font-semibold`} disabled={comment.trim().length < 1}>Post</button>\n                            </form>\n                        </div>\n\n                    </div>\n                </div>\n            </Dialog>\n        </>\n    )\n}\n\nexport default PostItem"]},"metadata":{},"sourceType":"module"}