{"ast":null,"code":"import _defineProperty from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/New folder (4)/instagram-mern-main/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import TextField from'@mui/material/TextField';import Auth from'./Auth';import{Link,useNavigate}from'react-router-dom';import{Avatar}from'@mui/material';import{useDispatch,useSelector}from'react-redux';import{toast}from'react-toastify';import{clearErrors,registerUser}from'../../actions/userAction';import BackdropLoader from'../Layouts/BackdropLoader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignUp=function SignUp(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.user;}),loading=_useSelector.loading,isAuthenticated=_useSelector.isAuthenticated,error=_useSelector.error;var _useState=useState({email:\"\",name:\"\",username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var email=user.email,name=user.name,username=user.username,password=user.password;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),avatarPreview=_useState6[0],setAvatarPreview=_useState6[1];var handleRegister=function handleRegister(e){e.preventDefault();var userCheck=/^[a-z0-9_.-]{6,25}$/igm;if(password.length<8){toast.error(\"Password length must be atleast 8 characters\");return;}if(!avatar){toast.error(\"Select Profile Pic\");return;}if(!userCheck.test(username)){toast.error(\"Invalid Username\");return;}var formData=new FormData();formData.set(\"email\",email);formData.set(\"name\",name);formData.set(\"username\",username);formData.set(\"password\",password);formData.set(\"avatar\",avatar);dispatch(registerUser(formData));};var handleDataChange=function handleDataChange(e){if(e.target.name==='avatar'){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);}};reader.readAsDataURL(e.target.files[0]);// console.log(e.target.files[0])\nsetAvatar(e.target.files[0]);}else{setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));}};useEffect(function(){if(error){toast.error(error);dispatch(clearErrors());}if(isAuthenticated){navigate('/');}},[dispatch,error,isAuthenticated,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(BackdropLoader,{}),/*#__PURE__*/_jsxs(Auth,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border flex flex-col gap-2 p-4 pt-10\",children:[/*#__PURE__*/_jsx(\"img\",{draggable:\"false\",className:\"mx-auto h-30 w-36 object-contain\",src:\"https://mygvbuck.s3.amazonaws.com/17b5514fa02aed5ea166d666258f64e2.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,encType:\"multipart/form-data\",className:\"flex flex-col justify-center items-center gap-3 m-3 md:m-8\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",name:\"email\",value:email,onChange:handleDataChange,required:true,size:\"small\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Full Name\",name:\"name\",value:name,onChange:handleDataChange,required:true,size:\"small\"}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",type:\"text\",name:\"username\",value:username,onChange:handleDataChange,size:\"small\",required:true,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",name:\"password\",value:password,onChange:handleDataChange,required:true,size:\"small\",fullWidth:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-between gap-3 items-center\",children:[/*#__PURE__*/_jsx(Avatar,{alt:\"Avatar Preview\",src:avatarPreview,sx:{width:48,height:48}}),/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",name:\"avatar\",onChange:handleDataChange,className:\"block w-full text-sm text-gray-400 file:mr-3 file:py-2 file:px-6 file:rounded-full file:border-0 file:text-sm file:cursor-pointer file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 \"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-primary-blue font-medium py-2 rounded text-white w-full\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"span\",{className:\"my-3 text-gray-500\",children:\"OR\"}),/*#__PURE__*/_jsx(Link,{to:\"/password/forgot\",className:\"text-sm font-medium  text-blue-800\",children:\"Forgot password?\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border p-5 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-primary-blue\",children:\"Log in\"})]})})]})]});};export default SignUp;","map":{"version":3,"sources":["D:/New folder (4)/instagram-mern-main/backend/frontend/src/components/User/SignUp.jsx"],"names":["React","useEffect","useState","TextField","Auth","Link","useNavigate","Avatar","useDispatch","useSelector","toast","clearErrors","registerUser","BackdropLoader","SignUp","dispatch","navigate","state","user","loading","isAuthenticated","error","email","name","username","password","setUser","avatar","setAvatar","avatarPreview","setAvatarPreview","handleRegister","e","preventDefault","userCheck","length","test","formData","FormData","set","handleDataChange","target","reader","FileReader","onload","readyState","result","readAsDataURL","files","value","width","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport TextField from '@mui/material/TextField';\nimport Auth from './Auth';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Avatar } from '@mui/material';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { clearErrors, registerUser } from '../../actions/userAction';\nimport BackdropLoader from '../Layouts/BackdropLoader';\n\nconst SignUp = () => {\n\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    const { loading, isAuthenticated, error } = useSelector((state) => state.user);\n\n    const [user, setUser] = useState({\n        email: \"\",\n        name: \"\",\n        username: \"\",\n        password: \"\",\n    });\n\n    const { email, name, username, password } = user;\n\n    const [avatar, setAvatar] = useState();\n    const [avatarPreview, setAvatarPreview] = useState();\n\n    const handleRegister = (e) => {\n        e.preventDefault();\n\n        const userCheck = /^[a-z0-9_.-]{6,25}$/igm;\n\n        if (password.length < 8) {\n            toast.error(\"Password length must be atleast 8 characters\");\n            return;\n        }\n        if (!avatar) {\n            toast.error(\"Select Profile Pic\");\n            return;\n        }\n        if (!userCheck.test(username)) {\n            toast.error(\"Invalid Username\");\n            return;\n        }\n\n        const formData = new FormData();\n        formData.set(\"email\", email);\n        formData.set(\"name\", name);\n        formData.set(\"username\", username);\n        formData.set(\"password\", password);\n        formData.set(\"avatar\", avatar);\n\n        dispatch(registerUser(formData));\n    }\n\n    const handleDataChange = (e) => {\n        if (e.target.name === 'avatar') {\n            const reader = new FileReader();\n\n            reader.onload = () => {\n                if (reader.readyState === 2) {\n                    setAvatarPreview(reader.result);\n                }\n            };\n\n            reader.readAsDataURL(e.target.files[0]);\n            // console.log(e.target.files[0])\n            setAvatar(e.target.files[0])\n\n        } else {\n            setUser({ ...user, [e.target.name]: e.target.value });\n        }\n    }\n\n    useEffect(() => {\n        if (error) {\n            toast.error(error);\n            dispatch(clearErrors());\n        }\n        if (isAuthenticated) {\n            navigate('/')\n        }\n    }, [dispatch, error, isAuthenticated, navigate]);\n\n    return (\n        <>\n            {loading && <BackdropLoader />}\n            <Auth>\n                <div className=\"bg-white border flex flex-col gap-2 p-4 pt-10\">\n                    <img draggable=\"false\" className=\"mx-auto h-30 w-36 object-contain\" src=\"https://mygvbuck.s3.amazonaws.com/17b5514fa02aed5ea166d666258f64e2.png\" alt=\"\" />\n                    <form\n                        onSubmit={handleRegister}\n                        encType=\"multipart/form-data\"\n                        className=\"flex flex-col justify-center items-center gap-3 m-3 md:m-8\"\n                    >\n                        <TextField\n                            fullWidth\n                            label=\"Email\"\n                            type=\"email\"\n                            name=\"email\"\n                            value={email}\n                            onChange={handleDataChange}\n                            required\n                            size=\"small\"\n                        />\n                        <TextField\n                            fullWidth\n                            label=\"Full Name\"\n                            name=\"name\"\n                            value={name}\n                            onChange={handleDataChange}\n                            required\n                            size=\"small\"\n                        />\n                        <TextField\n                            label=\"Username\"\n                            type=\"text\"\n                            name=\"username\"\n                            value={username}\n                            onChange={handleDataChange}\n                            size=\"small\"\n                            required\n                            fullWidth\n                        />\n                        <TextField\n                            label=\"Password\"\n                            type=\"password\"\n                            name=\"password\"\n                            value={password}\n                            onChange={handleDataChange}\n                            required\n                            size=\"small\"\n                            fullWidth\n                        />\n                        <div className=\"flex w-full justify-between gap-3 items-center\">\n                            <Avatar\n                                alt=\"Avatar Preview\"\n                                src={avatarPreview}\n                                sx={{ width: 48, height: 48 }}\n                            />\n                            <label>\n                                <input\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    name=\"avatar\"\n                                    onChange={handleDataChange}\n                                    className=\"block w-full text-sm text-gray-400\n                                    file:mr-3 file:py-2 file:px-6\n                                    file:rounded-full file:border-0\n                                    file:text-sm file:cursor-pointer file:font-semibold\n                                    file:bg-blue-100 file:text-blue-700\n                                    hover:file:bg-blue-200\n                                    \"/>\n                            </label>\n                        </div>\n\n                        <button type=\"submit\" className=\"bg-primary-blue font-medium py-2 rounded text-white w-full\">Sign up</button>\n                        <span className=\"my-3 text-gray-500\">OR</span>\n                        <Link to=\"/password/forgot\" className=\"text-sm font-medium  text-blue-800\">Forgot password?</Link>\n                    </form>\n                </div>\n\n                <div className=\"bg-white border p-5 text-center\">\n                    <span>Already have an account? <Link to=\"/login\" className=\"text-primary-blue\">Log in</Link></span>\n                </div>\n            </Auth>\n        </>\n    )\n}\n\nexport default SignUp"]},"metadata":{},"sourceType":"module"}